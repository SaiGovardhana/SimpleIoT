<!DOCTYPE html>
<!-- saved from url=(0045)https://javalin.io/documentation#static-files -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript" async="" src="./Documentation - Javalin - A lightweight Java and Kotlin web framework_files/analytics.js.download"></script><script async="" src="./Documentation - Javalin - A lightweight Java and Kotlin web framework_files/js"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-54137818-11', {'anonymize_ip': true});
</script>
    
    <link href="./Documentation - Javalin - A lightweight Java and Kotlin web framework_files/css" rel="stylesheet">
    <meta property="og:title" content="Documentation - Javalin - A lightweight Java and Kotlin web framework. Create REST APIs in Java or Kotlin easily.">
    <meta property="og:site_name" content="Javalin">
    <meta property="og:url" content="https://javalin.io">
    <meta property="og:description" content="Javalin - A lightweight Java and Kotlin web framework. Create REST APIs in Java or Kotlin easily.">
    <meta property="og:image" content="https://javalin.io/img/javalin.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="liMtSlffOZROWLqoiOZdSx-luH9_Siq5-Ot6xqHZwq8">
    <title>
        Documentation - Javalin - A lightweight Java and Kotlin web framework
    </title>
    <meta name="description" content="Javalin - A lightweight Java and Kotlin web framework. Create REST APIs in Java or Kotlin easily.">
    <link rel="canonical" href="https://javalin.io/documentation">
    <link rel="shortcut icon" type="image/png" href="https://javalin.io/img/favicon.png">
    <link rel="stylesheet" href="./Documentation - Javalin - A lightweight Java and Kotlin web framework_files/main.css">
    <style>/* Styles that affect the length of the document */
p code,
li code {
    font-size: 90%;
    letter-spacing: -0.5px;
    border: 1px solid #ccd;
    background: #f5f5f7;
    padding: 1px 3px;
}

.multitab-code pre {
    margin-top: 0;
    border-radius: 0 0 5px 5px;
}

.multitab-code div[data-tab] {
    display: none;
}

:target {
    scroll-margin-top: 108px;
}</style>
</head>
<body>
    <a id="fork-me" href="https://github.com/tipsy/javalin" target="_blank" rel="noopener">
    <img style="position:fixed;top:0;right:0;border:0;z-index:99999" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJUAAACVCAMAAABmfEh9AAAAllBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPEhwAAAAFBgkAAAARFR8fIiwRFB4YHCUQEx0RFB4SFiERFB8QEx3s7e4eIStPUlpKTFUvMjwOEhs8P0hfYmlXWmE5PUUZHSfd3uAnKjTAwcRnanB2eH5CRU6TlZqxs7bP0NKFh4yUlpqipKiUlpujpKiipKdzB4/DAAAAFXRSTlMAAwgBDREiKBYbL5wdQBjb3ZzclY3cWcIvAAAGZ0lEQVR42u2c3W7bMAyF02bL2q5bu7WLqDhW7Si24p902/u/3EglljxXQX1jixclsIv0QvhAHvAQZLJFF8vl1dX19afn/Ub9ej+2L5ufd6v725vPn66vr66ulsvFBOGoPj/LLJHvY8kkf/j2ZTUtlqe6ed6+JCOytX/ZPCLW/aRYnur2aZeo3QisjXogrO+TYjmq1ROqZgQWlvpxaiyisljf71dP+yQfJflk8mwtfbK+/NhnmxGSx1L/nBhraZP1ySbr7sc2O4xrEIMiTpqsu6+7zWGU5PNpi0hUfaxRkl9jqR9nxZLjJJ8d5s3W/mWU5Dfq56xY4z1x3iJuxnrinFg/xnrizJLfJZeLuMboJK9mbxDyIpPjkpvD48ySz4NQLpwnzopFY2CYqfzti7ibXfLZIQQlSoBjT1sRJL8bUgmCaiyWHwOjemKXqVIWYDwWljqmJ56h6jSVfyR+YOGJlCpbvipNhXBUbgycVfKqR3UuX0JUGNE8kcZA2VEphMLyZdIYabGieeJX74mYKyNEmiYaQCuLFdMTcy8sIUSuwWT6lYpI4SUfwRM9Vk1lbLQYYO3m90TVyxa1hgqqVEmHFdkTCaLRWQVa5rrAdMla+WzNPwYeXLaUBihyVBfUUhaAVh1zDNx1yZJllpLk20IWzqjjeaJXfK5J8ghVuQYRzxNdtpoOKt0674kjeVqNdFjqBAUatLJUMT3x0GtbCFXAqymVK2GkMZA80WH9gaqFLbVSGwxWI1ZbRhSFEAGsaKsRy7GFVlgsZT8yWI1YqkKtiUrpo+sPzhPjrEYsFv4jKGiMw/JjYCxPpCCotoDSYnFYjVgqRV3eQNNhRfdEwtoSVK51A+2wiBsVbww0BAWZBC08VuTVCAkroXQl8DdFLD6eaMCmK9+bTLzxxIdonqgIqixpGJTRPdGNgYIknwG0GZT4kcW5gLBQ8g0UugRzVhaLMVCIFF5lAXq7tsHhXGCxdCNlUboJItYYSEXMlOvxJTRK9AabqOeCg+ywslbYSExyIovuiQRxnpuPAICDDY/VSId1hCKrQHVtnsVqZJ1AIdMSTJqc2zyL1YiBhBr9voLOfTisRkqoMg2mAizksEHk8TwRxU5QhdGwdZKPey6wA7PZViQurOW6i/irESEMQckGc+UjqidaAtEiVAGtEJ7KST6KJ67dDuLYdfrWyp7BamTdnqFkDRj2vMJgNbI2lDFKmW6zGtqe5OOcC7z7EFSxRbhae6r1PoviiV71BhpJh6iyPCk++oXMUmm0HwyB8bvlcC74dXJqZLLZSkD/3yDirUYkNGmaN3maJsJkwmJFXo2c+kPdApi0hDaV557K4FyATFAilM6roupafTRPlJ3eZXGCMgAVZuuo4nnifuM9UQmCkgWQY1fQSPpjrNWIz5Y6QVVlhVBaifieaLFKldZ01SeoPBVSRfXEXYclEqgt1On0oxHrwmrEUU05BjptQZNQprStZf/uIwee6F6bYwwsa0nly7UmKHHxWyOeap4x0ICmFg9WWvSX4DcpHdWUReydC2StTpe7WuZdkw+sRgYPTrcacZonKF2i2nOkCntij2omTxQERWovpNsmvfl1weC56TzR33wwS9S5ZFoqGrjK3hioHk5Yg9em9ESnLZUa6lwlNFIc7br5/3PB7c3gsUk90WurAWnNOq3cDrzvibfDxyYdAx1WDcZ0UKStwbngPvDcHOeCGk5QUGSOynviKvDaHGOgqBHKb2wGP6i5Cz43xwldpd3GJnAuWIRj+hO6MABJKvu58p4YemtiT/RYr0b3Tyte8oGX5pK8qAGg9WL3sV1cjum/NVKabjk5iMvPTbwa6e//IlBdWo14qAhU75wLkCkC1bs/qIlFFfZEBlSBMZADVcgTGVCFJM+A6o3kk5wDVWg1woAq4IkcqEKeyIAq4Ik7BlSBMZADVWgMZEAV8EQOVCFPZEAV8EQOVAFP5EAV8kQGVIHVCAeqt5LfSAZUAU/kQBX6JiUDqtBqhAFVwBM5UIU8kQHVW8krDlShcwEDqoAncqAaYqEncqAaYpEnMqD6D2v15QnHQA5Ufaz71eqJxsAFg/BY35HriXbIHMJhEdftM+6QWUSHRVw3+L+VLXhEh4VcGM8LJnHGQjCKBZcgLOKysWATiEXBjAqxiMvGglEsMfhRWS4bC3bBk+ojPuIjPiIc/wAQkAE6ZqHsywAAAABJRU5ErkJggg==" alt="Fork me on GitHub">
</a>
    <header class="top-nav-header">
        <nav class="width-limit">
            <a id="logo" href="https://javalin.io/" aria-label="Javalin">
                <img src="./Documentation - Javalin - A lightweight Java and Kotlin web framework_files/logo.svg" alt="Javalin">
            </a>
            <ul>
                <li><a href="https://javalin.io/documentation">Docs</a></li>
                <li><a href="https://javalin.io/tutorials">Tutorials</a></li>
                <li><a href="https://javalin.io/community">Community</a></li>
                <li><a href="https://javalin.io/news">News</a></li>
            </ul>
        </nav>
    </header>
    <main class="width-limit has-right-menu">
        <script>
    const notificationId = "javalin-4-released";
    const hasBeenDismissed = localStorage.getItem(notificationId + "-dismissed") === "true";
    const pageLoadCount = parseInt(localStorage.getItem(notificationId + "-count") || 0);
    localStorage.setItem(notificationId + "-count", (pageLoadCount + 1).toString());
    if (!hasBeenDismissed && pageLoadCount >= 0) {
        document.write(`
            <div id="notification-banner">
                <h1>Javalin 4 released!</h1>
                Javalin 4 stable is finally here!
                Read more in the <a href="/news/javalin-4.0.0-stable.html">release post</a>.
            </div>
        `);
        if (pageLoadCount >= 0) {
            document.querySelector("#notification-banner").insertAdjacentHTML("beforeend", `<span class="close">×</span>`);
            document.querySelector("#notification-banner .close").addEventListener("click", () => {
                document.querySelector("#notification-banner").style.display = "none";
                localStorage.setItem(notificationId + "-dismissed", "true");
            });
        }
    }
</script>

<style>
    #notification-banner {
        line-height: 1.5;
        position: fixed;
        bottom: 32px;
        right: 32px;
        width: 360px;
        z-index: 9999999;
        background: linear-gradient(20deg, #29292d 30%, #008cbb);
        color: white;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.25);
        font-size: 16px;
        border-radius: 8px;
        padding: 24px;
    }

    #notification-banner h1 {
        line-height: 1;
        margin: 0 0 20px 0;
        font-family: 'Encode Sans', sans-serif;
        font-weight: 400;
        font-size: 22px;
        text-decoration: underline;
    }

    #notification-banner a {
        font-weight: 700;
        border: 1px solid white;
        padding: 1px 3px;
        background: white;
        color: #333;
        border-radius: 3px;
        margin: 0 2px;
    }

    #notification-banner .close {
        position: absolute;
        right: 14px;
        top: 14px;
        height: 40px;
        width: 40px;
        line-height: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 28px;
        font-family: arial, sans-serif;
        cursor: pointer;
        background: rgba(0, 0, 0, 0.15);
        border-radius: 5px;
    }

    @media (max-width: 480px) {
        #notification-banner {
            border-radius: 0;
            width: 100%;
            right: 0;
            bottom: 0;
            font-size: 14px;
        }
    }
</style>

<div id="spy-nav" class="right-menu">
  <ul>
    <li class=""><a href="https://javalin.io/documentation#getting-started" class="">Getting Started</a></li>
    <li class=""><a href="https://javalin.io/documentation#handlers" class="">HTTP Handlers</a>
      <ul>
        <li class=""><a href="https://javalin.io/documentation#before-handlers" class="">Before</a></li>
        <li class=""><a href="https://javalin.io/documentation#endpoint-handlers" class="">Endpoint</a></li>
        <li class=""><a href="https://javalin.io/documentation#after-handlers" class="">After</a></li>
        <li class=""><a href="https://javalin.io/documentation#context" class="">Context (ctx)</a></li>
      </ul>
    </li>
    <li><a href="https://javalin.io/documentation#websockets">WebSockets</a>
      <ul>
        <li><a href="https://javalin.io/documentation#wsbefore">Before</a></li>
        <li><a href="https://javalin.io/documentation#wsendpoint">Endpoint</a></li>
        <li><a href="https://javalin.io/documentation#wsafter">After</a></li>
        <li><a href="https://javalin.io/documentation#wscontext">Context (ctx)</a></li>
      </ul>
    </li>
    <li><a href="https://javalin.io/documentation#handler-groups">Handler groups</a></li>
    <li><a href="https://javalin.io/documentation#validation">Validation</a></li>
    <li class=""><a href="https://javalin.io/documentation#access-manager" class="">Access manager</a></li>
    <li><a href="https://javalin.io/documentation#default-responses">Default responses</a></li>
    <li><a href="https://javalin.io/documentation#exception-mapping">Exception Mapping</a></li>
    <li><a href="https://javalin.io/documentation#error-mapping">Error Mapping</a></li>
    <li><a href="https://javalin.io/documentation#server-sent-events">Server-sent Events</a></li>
    <li class=""><a href="https://javalin.io/documentation#configuration" class="">Configuration</a>
      <ul>
        <li class="active"><a href="https://javalin.io/documentation#static-files" class="active">Static Files</a></li>
        <li><a href="https://javalin.io/documentation#single-page-mode">Single page mode</a></li>
        <li><a href="https://javalin.io/documentation#logging">Logging</a></li>
        <li><a href="https://javalin.io/documentation#server-setup">Server setup</a></li>
      </ul>
    </li>
    <li><a href="https://javalin.io/documentation#lifecycle-events">Lifecycle events</a></li>
    <li><a href="https://javalin.io/documentation#plugins">Plugins</a></li>
    <li><a href="https://javalin.io/documentation#different-javalin-modules">Modules</a></li>
    <li><a href="https://javalin.io/documentation#faq">FAQ</a></li>
  </ul>
</div>

<h1 class="no-margin-top">Documentation</h1>

<p>The documentation on this page is always for the latest version of Javalin, currently <code class=" highlighter-rouge language-plaintext">4.3.0</code>.
Javalin follows <a href="http://semver.org/" target="_blank" rel="noopener">semantic versioning</a>, meaning there are no breaking
changes unless the major (leftmost) digit changes, for example <code class=" highlighter-rouge language-plaintext">4.X.X</code> to <code class=" highlighter-rouge language-plaintext">5.X.X</code>.
Functionality added after <code class=" highlighter-rouge language-plaintext">4.0.0</code> is marked with a label containing the version number,
ex: <span class="added-in">Added in v4.1.0</span></p>

<div class="star-us">
    <div>
        <span id="starUsLong">If you like Javalin, consider sponsoring or starring:</span>
        <span id="starUsShort">Like Javalin?</span>
    </div>
    <a class="sponsor-button" href="https://github.com/sponsors/tipsy" target="_blank" rel="noopener">
        <svg width="24" height="24" viewBox="0 0 24 24">
            <path d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"></path>
        </svg>
        Sponsor Javalin
    </a>
    <iframe id="starFrame" class="githubStar" src="./Documentation - Javalin - A lightweight Java and Kotlin web framework_files/github-btn.html" frameborder="0" scrolling="0" width="150px" height="35px">
    </iframe>
</div>
<style>
    .star-us {
        display: flex;
        align-items: center;
        padding: 24px;
        margin: 40px 0;
        font-family: 'Roboto Slab', sans-serif;
        font-weight: 500;
        background: white;
        border-radius: 24px;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
        border-bottom: 2px solid #ff6363;
    }

    #starUsShort {
        font-size: 15px;
        letter-spacing: -0.5px;
        font-weight: bold;
        display: none;
    }

    .sponsor-button {
        margin: 0 12px;
        display: flex;
        align-items: center;
        color: rgba(0, 0, 0, 0.7);
        background: #ffe8e8;
        border: 1px solid #ffb5b5;
        border-radius: 30px;
        padding: 4px 12px;
        font-weight: 500;
        font-family: 'Roboto Slab', sans-serif;
        transition: all .15s ease-in-out;
    }

    .sponsor-button:hover {
        color: rgba(0, 0, 0, 0.8);
        background: #ffe0e0;
    }

    .sponsor-button svg {
        transition: all .15s ease-in-out;
        margin-right: 8px;
    }

    .sponsor-button svg path {
        fill: #ff6363;
    }

    .sponsor-button:hover svg {
        transform: scale(1.15);
    }

    @media (max-width: 700px) {
        #starUsLong {
            display: none;
        }

        #starUsShort {
            display: block;
        }
    }
</style>

<h2 id="getting-started">Getting started</h2>

<p>Add the dependency:</p>

<div class="multitab-code dependencies" data-tab="1">
<ul>
    <li data-tab="1">Maven</li>
    <li data-tab="2">Gradle</li>
    <li data-tab="3">SBT</li>
    <li data-tab="4">Grape</li>
    <li data-tab="5">Leiningen</li>
    <li data-tab="6">Buildr</li>
    <li data-tab="7">Ivy</li>
</ul>

<div data-tab="1">
    <pre class="language-markup code-toolbar"><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.javalin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>javalin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.3.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre>
    <p><a href="https://javalin.io/tutorials/maven-setup">Not familiar with Maven? Click here for more detailed instructions.</a></p>
  </div>

<div data-tab="2">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">implementation group<span class="token operator">:</span> <span class="token string">'io.javalin'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'javalin'</span><span class="token punctuation">,</span> version<span class="token operator">:</span> <span class="token string">'4.3.0'</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
    <p><a href="https://javalin.io/tutorials/gradle-setup">Not familiar with Gradle? Click here for more detailed instructions.</a></p>
  </div>

<div data-tab="3">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">libraryDependencies <span class="token operator">+=</span> <span class="token string">"io.javalin"</span> <span class="token operator">%</span> <span class="token string">"javalin"</span> <span class="token operator">%</span> <span class="token string">"4.3.0"</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>

<div data-tab="4">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java"><span class="token annotation punctuation">@Grab</span><span class="token punctuation">(</span>group<span class="token operator">=</span><span class="token string">'io.javalin'</span><span class="token punctuation">,</span> module<span class="token operator">=</span><span class="token string">'javalin'</span><span class="token punctuation">,</span> version<span class="token operator">=</span><span class="token string">'4.3.0'</span><span class="token punctuation">)</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>

<div data-tab="5">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java"><span class="token punctuation">[</span>io<span class="token punctuation">.</span>javalin<span class="token operator">/</span>javalin <span class="token string">"4.3.0"</span><span class="token punctuation">]</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>

<div data-tab="6">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java"><span class="token string">'io.javalin:javalin:jar:4.3.0'</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>

<div data-tab="7">
    <pre class="language-markup code-toolbar"><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span> <span class="token attr-name">org</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>io.javalin<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javalin<span class="token punctuation">"</span></span> <span class="token attr-name">rev</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>4.3.0<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre>
  </div>

</div>

<p>Start coding:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java"><span class="token keyword">import</span> io<span class="token punctuation">.</span>javalin<span class="token punctuation">.</span>Javalin<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Javalin app <span class="token operator">=</span> Javalin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token number">7070</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token string">"Hello World"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin"><span class="token keyword">import</span> io<span class="token punctuation">.</span>javalin<span class="token punctuation">.</span>Javalin

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> app <span class="token operator">=</span> Javalin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token number">7070</span><span class="token punctuation">)</span>
    app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token string">"Hello World"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h2 id="handlers">Handlers</h2>
<p>Javalin has three main handler types: before-handlers, endpoint-handlers, and after-handlers.
(There are also exception-handlers and error-handlers, but we’ll get to them later).
The before-, endpoint- and after-handlers require three parts:</p>

<ul>
  <li>A verb, one of: <code class=" highlighter-rouge language-plaintext">before</code>, <code class=" highlighter-rouge language-plaintext">get</code>, <code class=" highlighter-rouge language-plaintext">post</code>, <code class=" highlighter-rouge language-plaintext">put</code>, <code class=" highlighter-rouge language-plaintext">patch</code>, <code class=" highlighter-rouge language-plaintext">delete</code>, <code class=" highlighter-rouge language-plaintext">after</code> <small>(… <code class=" highlighter-rouge language-plaintext">head</code>, <code class=" highlighter-rouge language-plaintext">options</code>, <code class=" highlighter-rouge language-plaintext">trace</code>, <code class=" highlighter-rouge language-plaintext">connect</code>)</small></li>
  <li>A path, ex: <code class=" highlighter-rouge language-plaintext">/</code>, <code class=" highlighter-rouge language-plaintext">/hello-world</code>, <code class=" highlighter-rouge language-plaintext">/hello/{name}</code></li>
  <li>A handler implementation, ex <code class=" highlighter-rouge language-plaintext">ctx -&gt; { ... }</code>, <code class=" highlighter-rouge language-plaintext">MyClass implements Handler</code>, etc</li>
</ul>

<p>The <code class=" highlighter-rouge language-plaintext">Handler</code> interface has a void return type. You use a method like <code class=" highlighter-rouge language-plaintext">ctx.result(result)</code>,
<code class=" highlighter-rouge language-plaintext">ctx.json(obj)</code>, or <code class=" highlighter-rouge language-plaintext">ctx.future(future)</code> to set the response which will be returned to the user.</p>

<p>You can learn about how Javalin handles concurrency in <a href="https://javalin.io/documentation#concurrency">FAQ - Concurrency</a>.</p>

<h3 id="before-handlers">Before handlers</h3>
<p>Before-handlers are matched before every request (including static files).</p>
<div class="comment">You might know before-handlers as filters, interceptors, or middleware from other libraries.</div>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span>ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// runs before all requests</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span><span class="token string">"/path/*"</span><span class="token punctuation">,</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// runs before request to /path/*</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">before</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span>
    <span class="token comment" spellcheck="true">// runs before all requests</span>
<span class="token punctuation">}</span>
app<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span><span class="token string">"/path/*"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span>
    <span class="token comment" spellcheck="true">// runs before request to /path/*</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h3 id="endpoint-handlers">Endpoint handlers</h3>
<p>Endpoint handlers are the main handler type, and defines your API. You can add a GET handler to
server data to a client, or a POST handler to receive some data.
Common methods are supported directly on the <code class=" highlighter-rouge language-plaintext">Javalin</code> class (<small>GET, POST, PUT, PATCH, DELETE, HEAD, OPTIONS</small>),
uncommon operations (<small>TRACE, CONNECT</small>) are supported via <code class=" highlighter-rouge language-plaintext">Javalin#addHandler</code>.</p>

<p>Endpoint-handlers are matched in the order they are defined.</p>

<div class="comment">You might know endpoint-handlers as routes or middleware from other libraries.</div>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/output"</span><span class="token punctuation">,</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// some code</span>
    ctx<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/input"</span><span class="token punctuation">,</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// some code</span>
    ctx<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">201</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/output"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span>
    <span class="token comment" spellcheck="true">// some code</span>
    ctx<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token keyword">object</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/input"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span>
    <span class="token comment" spellcheck="true">// some code</span>
    ctx<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">201</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<p>Handler paths can include path-parameters. These are available via <code class=" highlighter-rouge language-plaintext">ctx.pathParam("key")</code>:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/hello/{name}"</span><span class="token punctuation">,</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// the {} syntax does not allow slashes ('/') as part of the parameter</span>
    ctx<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token string">"Hello: "</span> <span class="token operator">+</span> ctx<span class="token punctuation">.</span><span class="token function">pathParam</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/hello/&lt;name&gt;"</span><span class="token punctuation">,</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// the &lt;&gt; syntax allows slashes ('/') as part of the parameter</span>
    ctx<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token string">"Hello: "</span> <span class="token operator">+</span> ctx<span class="token punctuation">.</span><span class="token function">pathParam</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/hello/{name}"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span> <span class="token comment" spellcheck="true">// the {} syntax does not allow slashes ('/') as part of the parameter</span>
    ctx<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token string">"Hello: "</span> <span class="token operator">+</span> ctx<span class="token punctuation">.</span><span class="token function">pathParam</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/hello/&lt;name&gt;"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span> <span class="token comment" spellcheck="true">// the &lt;&gt; syntax allows slashes ('/') as part of the parameter</span>
    ctx<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token string">"Hello: "</span> <span class="token operator">+</span> ctx<span class="token punctuation">.</span><span class="token function">pathParam</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<p>Handler paths can also include wildcard parameters:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/path/*"</span><span class="token punctuation">,</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// will match anything starting with /path/</span>
    ctx<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token string">"You are here because "</span> <span class="token operator">+</span> ctx<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" matches "</span> <span class="token operator">+</span> ctx<span class="token punctuation">.</span><span class="token function">matchedPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/path/*"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span> <span class="token comment" spellcheck="true">// will match anything starting with /path/</span>
    ctx<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token string">"You are here because "</span> <span class="token operator">+</span> ctx<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" matches "</span> <span class="token operator">+</span> ctx<span class="token punctuation">.</span><span class="token function">matchedPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<p>However, you cannot extract the value of a wildcard.
Use a slash accepting path-parameter (<code class=" highlighter-rouge language-plaintext">&lt;param-name&gt;</code>) if you need this behavior.</p>

<h3 id="after-handlers">After handlers</h3>
<p>After-handlers run after every request (even if an exception occurred)</p>
<div class="comment">You might know after-handlers as filters, interceptors, or middleware from other libraries.</div>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span>ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// run after all requests</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token string">"/path/*"</span><span class="token punctuation">,</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// runs after request to /path/*</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">after</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span>
    <span class="token comment" spellcheck="true">// run after all requests</span>
<span class="token punctuation">}</span>
app<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token string">"/path/*"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span>
    <span class="token comment" spellcheck="true">// runs after request to /path/*</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h3 id="context">Context</h3>
<p>The <code class=" highlighter-rouge language-plaintext">Context</code> object provides you with everything you need to handle a http-request.
It contains the underlying servlet-request and servlet-response, and a bunch of getters
and setters.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java"><span class="token comment" spellcheck="true">// Request methods</span>
<span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                  <span class="token comment" spellcheck="true">// request body as string</span>
<span class="token function">bodyAsBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                           <span class="token comment" spellcheck="true">// request body as array of bytes</span>
<span class="token function">bodyAsInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                     <span class="token comment" spellcheck="true">// request body as input stream</span>
<span class="token function">bodyAsClass</span><span class="token punctuation">(</span>clazz<span class="token punctuation">)</span>                      <span class="token comment" spellcheck="true">// request body as specified class (deserialized from JSON)</span>
<span class="token function">bodyStreamAsClass</span><span class="token punctuation">(</span>clazz<span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">// request body as specified class (memory optimized version of above)</span>
<span class="token function">bodyValidator</span><span class="token punctuation">(</span>clazz<span class="token punctuation">)</span>                    <span class="token comment" spellcheck="true">// request body as validator typed as specified class</span>
<span class="token function">uploadedFile</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                    <span class="token comment" spellcheck="true">// uploaded file by name</span>
<span class="token function">uploadedFiles</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                   <span class="token comment" spellcheck="true">// all uploaded files by name</span>
<span class="token function">uploadedFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                         <span class="token comment" spellcheck="true">// all uploaded files as list</span>
<span class="token function">formParam</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                       <span class="token comment" spellcheck="true">// form parameter by name, as string</span>
<span class="token function">formParamAsClass</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> clazz<span class="token punctuation">)</span>         <span class="token comment" spellcheck="true">// form parameter by name, as validator typed as specified class</span>
<span class="token function">formParams</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                      <span class="token comment" spellcheck="true">// list of form parameters by name</span>
<span class="token function">formParamMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                          <span class="token comment" spellcheck="true">// map of all form parameters</span>
<span class="token function">pathParam</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                       <span class="token comment" spellcheck="true">// path parameter by name as string</span>
<span class="token function">pathParamAsClass</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> clazz<span class="token punctuation">)</span>         <span class="token comment" spellcheck="true">// path parameter as validator typed as specified class</span>
<span class="token function">pathParamMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                          <span class="token comment" spellcheck="true">// map of all path parameters</span>
<span class="token function">basicAuthCredentialsExist</span><span class="token punctuation">(</span><span class="token punctuation">)</span>             <span class="token comment" spellcheck="true">// true if request has basic auth credentials</span>
<span class="token function">basicAuthCredentials</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                  <span class="token comment" spellcheck="true">// basic auth credentials (if set)</span>
<span class="token function">attribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">// set an attribute on the request</span>
<span class="token function">attribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                       <span class="token comment" spellcheck="true">// get an attribute on the request</span>
<span class="token function">attributeMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                          <span class="token comment" spellcheck="true">// map of all attributes on the request</span>
<span class="token function">contentLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                         <span class="token comment" spellcheck="true">// content length of the request body</span>
<span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                           <span class="token comment" spellcheck="true">// request content type</span>
<span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                          <span class="token comment" spellcheck="true">// request cookie by name</span>
<span class="token function">cookieMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                             <span class="token comment" spellcheck="true">// map of all request cookies</span>
<span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                          <span class="token comment" spellcheck="true">// request header by name (can be used with Header.HEADERNAME)</span>
<span class="token function">headerAsClass</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> clazz<span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">// request header by name, as validator typed as specified class</span>
<span class="token function">headerMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                             <span class="token comment" spellcheck="true">// map of all request headers</span>
<span class="token function">host</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                  <span class="token comment" spellcheck="true">// host as string</span>
<span class="token function">ip</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                    <span class="token comment" spellcheck="true">// ip as string</span>
<span class="token function">isMultipart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                           <span class="token comment" spellcheck="true">// true if the request is multipart</span>
<span class="token function">isMultipartFormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                   <span class="token comment" spellcheck="true">// true if the request is multipart/formdata</span>
<span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                <span class="token comment" spellcheck="true">// request methods (GET, POST, etc)</span>
<span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                  <span class="token comment" spellcheck="true">// request path</span>
<span class="token function">port</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                  <span class="token comment" spellcheck="true">// request port</span>
<span class="token function">protocol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                              <span class="token comment" spellcheck="true">// request protocol</span>
<span class="token function">queryParam</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                      <span class="token comment" spellcheck="true">// query param by name as string</span>
<span class="token function">queryParamAsClass</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> clazz<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">// query param parameter by name, as validator typed as specified class</span>
<span class="token function">queryParams</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                      <span class="token comment" spellcheck="true">// list of query parameters by name</span>
<span class="token function">queryParamMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                         <span class="token comment" spellcheck="true">// map of all query parameters</span>
<span class="token function">queryString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                           <span class="token comment" spellcheck="true">// full query string</span>
<span class="token function">scheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                <span class="token comment" spellcheck="true">// request scheme</span>
<span class="token function">sessionAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>         <span class="token comment" spellcheck="true">// set a session attribute</span>
<span class="token function">sessionAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">// get a session attribute</span>
<span class="token function">consumeSessionAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>         <span class="token comment" spellcheck="true">// get a session attribute, and set value to null</span>
<span class="token function">cachedSessionAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>   <span class="token comment" spellcheck="true">// get a session attribute, and cache the value as a request attribute</span>
<span class="token function">cachedSessionAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// set a session attribute, and cache the value as a request attribute</span>
<span class="token function">sessionAttributeMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                   <span class="token comment" spellcheck="true">// map of all session attributes</span>
<span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                   <span class="token comment" spellcheck="true">// request url</span>
<span class="token function">fullUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                               <span class="token comment" spellcheck="true">// request url + query string</span>
<span class="token function">contextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                           <span class="token comment" spellcheck="true">// request context path</span>
<span class="token function">userAgent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                             <span class="token comment" spellcheck="true">// request user agent</span>

<span class="token comment" spellcheck="true">// Response methods</span>
<span class="token function">result</span><span class="token punctuation">(</span><span class="token string">"result"</span><span class="token punctuation">)</span>                        <span class="token comment" spellcheck="true">// set result stream to specified string (overwrites any previously set result)</span>
<span class="token function">result</span><span class="token punctuation">(</span>byteArray<span class="token punctuation">)</span>                       <span class="token comment" spellcheck="true">// set result stream to specified byte array (overwrites any previously set result)</span>
<span class="token function">result</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span>                     <span class="token comment" spellcheck="true">// set result stream to specified input stream (overwrites any previously set result)</span>
<span class="token function">seekableStream</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">,</span> <span class="token string">"type"</span><span class="token punctuation">)</span>     <span class="token comment" spellcheck="true">// write content immediately as seekable stream (useful for audio and video)</span>
<span class="token function">resultStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                          <span class="token comment" spellcheck="true">// get current result stream</span>
<span class="token function">resultString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                          <span class="token comment" spellcheck="true">// get current result stream as string (if possible), and reset result stream</span>
<span class="token function">future</span><span class="token punctuation">(</span>future<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">// set the result to be a future, see async section (overwrites any previously set result)</span>
<span class="token function">resultFuture</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                          <span class="token comment" spellcheck="true">// get current result future</span>
<span class="token function">contentType</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">)</span>                     <span class="token comment" spellcheck="true">// set the response content type</span>
<span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"value"</span><span class="token punctuation">)</span>                 <span class="token comment" spellcheck="true">// set response header by name (can be used with Header.HEADERNAME)</span>
<span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">"/path"</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span>                 <span class="token comment" spellcheck="true">// redirect to the given path with the given status code</span>
<span class="token function">status</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span>                            <span class="token comment" spellcheck="true">// set the response status code</span>
<span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                <span class="token comment" spellcheck="true">// get the response status code</span>
<span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"value"</span><span class="token punctuation">,</span> maxAge<span class="token punctuation">)</span>         <span class="token comment" spellcheck="true">// set response cookie by name, with value and max-age (optional).</span>
<span class="token function">cookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span>                          <span class="token comment" spellcheck="true">// set cookie using javalin Cookie class</span>
<span class="token function">removeCookie</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"/path"</span><span class="token punctuation">)</span>           <span class="token comment" spellcheck="true">// removes cookie by name and path (optional)</span>
<span class="token function">json</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>                               <span class="token comment" spellcheck="true">// calls result(jsonString), and also sets content type to json</span>
<span class="token function">jsonStream</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>                         <span class="token comment" spellcheck="true">// calls result(jsonStream), and also sets content type to json</span>
<span class="token function">html</span><span class="token punctuation">(</span><span class="token string">"html"</span><span class="token punctuation">)</span>                            <span class="token comment" spellcheck="true">// calls result(string), and also sets content type to html</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token string">"/template.tmpl"</span><span class="token punctuation">,</span> model<span class="token punctuation">)</span>         <span class="token comment" spellcheck="true">// calls html(renderedTemplate)</span>

<span class="token comment" spellcheck="true">// Other methods</span>
<span class="token function">handlerType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                           <span class="token comment" spellcheck="true">// handler type of the current handler (BEFORE, AFTER, GET, etc)</span>
<span class="token function">appAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                    <span class="token comment" spellcheck="true">// get an attribute on the Javalin instance</span>
<span class="token function">matchedPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                           <span class="token comment" spellcheck="true">// get the path that was used to match this request (ex, "/hello/{name}")</span>
<span class="token function">endpointHandlerPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                   <span class="token comment" spellcheck="true">// get the path of the endpoint handler that was used to match this request</span>
cookieStore                             <span class="token comment" spellcheck="true">// see cookie store section below</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<h4 id="contextresolvers">ContextResolvers</h4>
<p>Some of the methods in <code class=" highlighter-rouge language-plaintext">Context</code> can be configured through the <code class=" highlighter-rouge language-plaintext">ContextResolvers</code> configuration class:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">Javalin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span><span class="token function">contextResolvers</span><span class="token punctuation">(</span>resolvers <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        resolvers<span class="token punctuation">.</span>ip <span class="token operator">=</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">"custom ip"</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// called by Context#ip()</span>
        resolvers<span class="token punctuation">.</span>host <span class="token operator">=</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">"custom host"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// called by Context#host()</span>
        resolvers<span class="token punctuation">.</span>scheme <span class="token operator">=</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">"custom scheme"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// called by Context#scheme()</span>
        resolvers<span class="token punctuation">.</span>url <span class="token operator">=</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">"custom url"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// called by Context#url()</span>
        resolvers<span class="token punctuation">.</span>fullUrl <span class="token operator">=</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">"custom fullUrl"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// called by Context#fullUrl()</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">Javalin<span class="token punctuation">.</span><span class="token function">create</span> <span class="token punctuation">{</span> config <span class="token operator">-&gt;</span>
    config<span class="token punctuation">.</span><span class="token function">contextResolvers</span> <span class="token punctuation">{</span> resolvers <span class="token operator">-&gt;</span>
        resolvers<span class="token punctuation">.</span>ip <span class="token operator">=</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span> <span class="token string">"custom ip"</span> <span class="token punctuation">}</span>     <span class="token comment" spellcheck="true">// called by Context#ip()</span>
        resolvers<span class="token punctuation">.</span>host <span class="token operator">=</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span> <span class="token string">"custom host"</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// called by Context#host()</span>
        resolvers<span class="token punctuation">.</span>scheme <span class="token operator">=</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span> <span class="token string">"custom scheme"</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// called by Context#scheme()</span>
        resolvers<span class="token punctuation">.</span>url <span class="token operator">=</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span> <span class="token string">"custom url"</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// called by Context#url()</span>
        resolvers<span class="token punctuation">.</span><span class="token function">fullUrl</span> <span class="token punctuation">{</span> <span class="token operator">=</span> ctx <span class="token operator">-&gt;</span> <span class="token string">"custom fullUrl"</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// called by Context#fullUrl()</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h4 id="cookie-store">Cookie Store</h4>

<p>The <code class=" highlighter-rouge language-plaintext">ctx.cookieStore()</code> functions provide a convenient way for sharing information between handlers, request, or even servers:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">ctx<span class="token punctuation">.</span><span class="token function">cookieStore</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// store any type of value</span>
ctx<span class="token punctuation">.</span><span class="token function">cookieStore</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// read any type of value</span>
ctx<span class="token punctuation">.</span><span class="token function">clearCookieStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// clear the cookie-store</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>
<p>The cookieStore works like this:</p>
<ol>
  <li>The first handler that matches the incoming request will populate the cookie-store-map with the data currently stored in the cookie (if any).</li>
  <li>This map can now be used as a state between handlers on the same request-cycle, pretty much in the same way as <code class=" highlighter-rouge language-plaintext">ctx.attribute()</code></li>
  <li>At the end of the request-cycle, the cookie-store-map is serialized, base64-encoded and written to the response as a cookie.
This allows you to share the map between requests and servers (in case you are running multiple servers behind a load-balancer)</li>
</ol>

<h5 id="example">Example:</h5>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">serverOneApp<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/cookie-storer"</span><span class="token punctuation">,</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span><span class="token function">cookieStore</span><span class="token punctuation">(</span><span class="token string">"string"</span><span class="token punctuation">,</span> <span class="token string">"Hello world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">cookieStore</span><span class="token punctuation">(</span><span class="token string">"i"</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">cookieStore</span><span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">,</span> Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"One"</span><span class="token punctuation">,</span> <span class="token string">"Two"</span><span class="token punctuation">,</span> <span class="token string">"Three"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
serverTwoApp<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/cookie-reader"</span><span class="token punctuation">,</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// runs on a different server than serverOneApp</span>
    String string <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">cookieStore</span><span class="token punctuation">(</span><span class="token string">"string"</span><span class="token punctuation">)</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">cookieStore</span><span class="token punctuation">(</span><span class="token string">"i"</span><span class="token punctuation">)</span>
    List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> list <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">cookieStore</span><span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">serverOneApp<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/cookie-storer"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span>
    ctx<span class="token punctuation">.</span><span class="token function">cookieStore</span><span class="token punctuation">(</span><span class="token string">"string"</span><span class="token punctuation">,</span> <span class="token string">"Hello world!"</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">cookieStore</span><span class="token punctuation">(</span><span class="token string">"i"</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">cookieStore</span><span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">,</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token string">"One"</span><span class="token punctuation">,</span> <span class="token string">"Two"</span><span class="token punctuation">,</span> <span class="token string">"Three"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
serverTwoApp<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/cookie-reader"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span> <span class="token comment" spellcheck="true">// runs on a different server than serverOneApp</span>
    <span class="token keyword">val</span> string <span class="token operator">=</span> ctx<span class="token punctuation">.</span>cookieStore<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"string"</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> i <span class="token operator">=</span> ctx<span class="token punctuation">.</span>cookieStore<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"i"</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> list <span class="token operator">=</span> ctx<span class="token punctuation">.</span>cookieStore<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<p>Since the client stores the cookie, the <code class=" highlighter-rouge language-plaintext">get</code> request to <code class=" highlighter-rouge language-plaintext">serverTwoApp</code>
will be able to retrieve the information that was passed in the <code class=" highlighter-rouge language-plaintext">post</code> to <code class=" highlighter-rouge language-plaintext">serverOneApp</code>.</p>

<p>Please note that cookies have a max-size of 4kb.</p>

<h2 id="websockets">WebSockets</h2>

<p>Javalin has a very intuitive way of handling WebSockets. You declare an endpoint
with a path and configure the different event handlers in a lambda:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">ws</span><span class="token punctuation">(</span><span class="token string">"/websocket/{path}"</span><span class="token punctuation">,</span> ws <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    ws<span class="token punctuation">.</span><span class="token function">onConnect</span><span class="token punctuation">(</span>ctx <span class="token operator">-</span><span class="token operator">&gt;</span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Connected"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">ws</span><span class="token punctuation">(</span><span class="token string">"/websocket/{path}"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ws <span class="token operator">-&gt;</span>
    ws<span class="token punctuation">.</span><span class="token function">onConnect</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Connected"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<p>There are a total of five events supported:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">ws<span class="token punctuation">.</span><span class="token function">onConnect</span><span class="token punctuation">(</span>WsConnectContext<span class="token punctuation">)</span>
ws<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span>WsErrorContext<span class="token punctuation">)</span>
ws<span class="token punctuation">.</span><span class="token function">onClose</span><span class="token punctuation">(</span>WsCloseContext<span class="token punctuation">)</span>
ws<span class="token punctuation">.</span><span class="token function">onMessage</span><span class="token punctuation">(</span>WsMessageContext<span class="token punctuation">)</span>
ws<span class="token punctuation">.</span><span class="token function">onBinaryMessage</span><span class="token punctuation">(</span>WsBinaryMessageContext<span class="token punctuation">)</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<p>The different flavors of <code class=" highlighter-rouge language-plaintext">WsContext</code> expose different things, for example,
<code class=" highlighter-rouge language-plaintext">WsMessageContext</code> has the method <code class=" highlighter-rouge language-plaintext">.message()</code> which gives you the message that the client sent.
The differences between the different contexts is small, and a full overview can be seen in the <a href="https://javalin.io/documentation#wscontext">WsContext</a> section.</p>

<p>You can learn about how Javalin handles WebSocket concurrency in <a href="https://javalin.io/documentation#concurrency">FAQ - Concurrency</a>.</p>

<h3 id="wsbefore">WsBefore</h3>
<p>The <code class=" highlighter-rouge language-plaintext">app.wsBefore</code> adds a handler that runs before a WebSocket handler.
You can have as many before-handlers as you want per WebSocket endpoint, and all events are supported.</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">wsBefore</span><span class="token punctuation">(</span>ws <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// runs before all WebSocket requests</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">wsBefore</span><span class="token punctuation">(</span><span class="token string">"/path/*"</span><span class="token punctuation">,</span> ws <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// runs before websocket requests to /path/*</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">wsBefore</span> <span class="token punctuation">{</span> ws <span class="token operator">-&gt;</span>
    <span class="token comment" spellcheck="true">// runs before all WebSocket requests</span>
<span class="token punctuation">}</span>
app<span class="token punctuation">.</span><span class="token function">wsBefore</span><span class="token punctuation">(</span><span class="token string">"/path/*"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ws <span class="token operator">-&gt;</span>
    <span class="token comment" spellcheck="true">// runs before websocket requests to /path/*</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h3 id="wsendpoint">WsEndpoint</h3>
<p>A WebSocket endpoint is declared with <code class=" highlighter-rouge language-plaintext">app.ws(path, handler)</code>. WebSocket handlers require unique paths.</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">ws</span><span class="token punctuation">(</span><span class="token string">"/websocket/{path}"</span><span class="token punctuation">,</span> ws <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    ws<span class="token punctuation">.</span><span class="token function">onConnect</span><span class="token punctuation">(</span>ctx <span class="token operator">-</span><span class="token operator">&gt;</span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Connected"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ws<span class="token punctuation">.</span><span class="token function">onMessage</span><span class="token punctuation">(</span>ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        User user <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">messageAsClass</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// convert from json</span>
        ctx<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// convert to json and send back</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ws<span class="token punctuation">.</span><span class="token function">onBinaryMessage</span><span class="token punctuation">(</span>ctx <span class="token operator">-</span><span class="token operator">&gt;</span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Message"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    ws<span class="token punctuation">.</span><span class="token function">onClose</span><span class="token punctuation">(</span>ctx <span class="token operator">-</span><span class="token operator">&gt;</span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Closed"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ws<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span>ctx <span class="token operator">-</span><span class="token operator">&gt;</span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Errored"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">ws</span><span class="token punctuation">(</span><span class="token string">"/websocket/{path}"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ws <span class="token operator">-&gt;</span>
    ws<span class="token punctuation">.</span><span class="token function">onConnect</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Connected"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    ws<span class="token punctuation">.</span><span class="token function">onMessage</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span>
        <span class="token keyword">val</span> user <span class="token operator">=</span> ctx<span class="token punctuation">.</span>messageAsClass<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// convert from json</span>
        ctx<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// convert to json and send back</span>
    <span class="token punctuation">}</span>
    ws<span class="token punctuation">.</span><span class="token function">onBinaryMessage</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Message"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    ws<span class="token punctuation">.</span><span class="token function">onClose</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Closed"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    ws<span class="token punctuation">.</span><span class="token function">onError</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Errored"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h3 id="wsafter">WsAfter</h3>
<p>The <code class=" highlighter-rouge language-plaintext">app.wsAfter</code> adds a handler that runs after a WebSocket handler.
You can have as many after-handlers as you want per WebSocket endpoint, and all events are supported.</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">wsAfter</span><span class="token punctuation">(</span>ws <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// runs after all WebSocket requests</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">wsAfter</span><span class="token punctuation">(</span><span class="token string">"/path/*"</span><span class="token punctuation">,</span> ws <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// runs after websocket requests to /path/*</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">wsAfter</span> <span class="token punctuation">{</span> ws <span class="token operator">-&gt;</span>
    <span class="token comment" spellcheck="true">// runs after all WebSocket requests</span>
<span class="token punctuation">}</span>
app<span class="token punctuation">.</span><span class="token function">wsAfter</span><span class="token punctuation">(</span><span class="token string">"/path/*"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ws <span class="token operator">-&gt;</span>
    <span class="token comment" spellcheck="true">// runs after websocket requests to /path/*</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h2 id="wscontext">WsContext</h2>
<p>The <code class=" highlighter-rouge language-plaintext">WsContext</code> object provides you with everything you need to handle a websocket-request.
It contains the underlying websocket session and servlet-request, and convenience methods for sending
messages to the client.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java"><span class="token comment" spellcheck="true">// Session methods</span>
<span class="token function">send</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>                               <span class="token comment" spellcheck="true">// serialize object to json string and send it to client</span>
<span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">)</span>                         <span class="token comment" spellcheck="true">// send string to client</span>
<span class="token function">send</span><span class="token punctuation">(</span>byteBuffer<span class="token punctuation">)</span>                        <span class="token comment" spellcheck="true">// send bytes to client</span>

<span class="token comment" spellcheck="true">// Upgrade Context methods (getters)</span>
<span class="token function">matchedPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                           <span class="token comment" spellcheck="true">// get the path that was used to match this request (ex, "/hello/{name}")</span>
<span class="token function">host</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                  <span class="token comment" spellcheck="true">// host as string</span>

<span class="token function">queryParam</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                      <span class="token comment" spellcheck="true">// query param by name as string</span>
<span class="token function">queryParamAsClass</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> clazz<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">// query param parameter by name, as validator typed as specified class</span>
<span class="token function">queryParams</span><span class="token punctuation">(</span>"name<span class="token punctuation">)</span>                      <span class="token comment" spellcheck="true">// list of query parameters by name</span>
<span class="token function">queryParamMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                         <span class="token comment" spellcheck="true">// map of all query parameters</span>
<span class="token function">queryString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                           <span class="token comment" spellcheck="true">// full query string</span>

<span class="token function">pathParam</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                       <span class="token comment" spellcheck="true">// path parameter by name as string</span>
<span class="token function">pathParamAsClass</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> clazz<span class="token punctuation">)</span>         <span class="token comment" spellcheck="true">// path parameter as validator typed as specified class</span>
<span class="token function">pathParamMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                          <span class="token comment" spellcheck="true">// map of all path parameters</span>

<span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                          <span class="token comment" spellcheck="true">// request header by name (can be used with Header.HEADERNAME)</span>
<span class="token function">headerAsClass</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> clazz<span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">// request header by name, as validator typed as specified class</span>
<span class="token function">headerMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                             <span class="token comment" spellcheck="true">// map of all request headers</span>

<span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                          <span class="token comment" spellcheck="true">// request cookie by name</span>
<span class="token function">cookieMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                             <span class="token comment" spellcheck="true">// map of all request cookies</span>

<span class="token function">attribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">// set an attribute on the request</span>
<span class="token function">attribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                       <span class="token comment" spellcheck="true">// get an attribute on the request</span>
<span class="token function">attributeMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                          <span class="token comment" spellcheck="true">// map of all attributes on the request</span>

<span class="token function">sessionAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">// get a session attribute</span>
<span class="token function">sessionAttributeMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                   <span class="token comment" spellcheck="true">// map of all session attributes</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<h3 id="wsmessagecontext">WsMessageContext</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java"><span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                               <span class="token comment" spellcheck="true">// receive a string message from the client</span>
<span class="token function">messageAsClass</span><span class="token punctuation">(</span>clazz<span class="token punctuation">)</span>                   <span class="token comment" spellcheck="true">// deserialize message from client</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<h3 id="wsbinarymessagecontext">WsBinaryMessageContext</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java"><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                  <span class="token comment" spellcheck="true">// receive a byte array of data from the client</span>
<span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                <span class="token comment" spellcheck="true">// the offset of the data</span>
<span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                <span class="token comment" spellcheck="true">// the length of the data</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<h3 id="wsclosecontext">WsCloseContext</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java"><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                <span class="token comment" spellcheck="true">// the int status for why connection was closed</span>
<span class="token function">reason</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                <span class="token comment" spellcheck="true">// the string reason for why connection was closed</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<h3 id="wserrorcontext">WsErrorContext</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java"><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                 <span class="token comment" spellcheck="true">// the throwable error that occurred</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<h3 id="wsconnectcontext">WsConnectContext</h3>
<p>The <code class=" highlighter-rouge language-plaintext">WsConnectContext</code> class doesn’t add anything to the base <code class=" highlighter-rouge language-plaintext">WsContext</code></p>

<h2 id="handler-groups">Handler groups</h2>
<p>You can group your endpoints by using the <code class=" highlighter-rouge language-plaintext">routes()</code> and <code class=" highlighter-rouge language-plaintext">path()</code> methods. <code class=" highlighter-rouge language-plaintext">routes()</code> creates
a temporary static instance of Javalin so you can skip the <code class=" highlighter-rouge language-plaintext">app.</code> prefix before your handlers.
This is equivalent to calling <code class=" highlighter-rouge language-plaintext">ApiBuilder.get(app, ...)</code>, which translates
to <code class=" highlighter-rouge language-plaintext">app.get(...)</code>. It is <strong>not</strong> a global singleton that holds any information, so
you can use this safely in multiple locations and from multiple threads.</p>

<p>You can import all the HTTP methods with <code class=" highlighter-rouge language-plaintext">import static io.javalin.apibuilder.ApiBuilder.*</code>.</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"users"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">get</span><span class="token punctuation">(</span>UserController<span class="token operator">:</span><span class="token operator">:</span>getAllUsers<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">post</span><span class="token punctuation">(</span>UserController<span class="token operator">:</span><span class="token operator">:</span>createUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"{id}"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">get</span><span class="token punctuation">(</span>UserController<span class="token operator">:</span><span class="token operator">:</span>getUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">patch</span><span class="token punctuation">(</span>UserController<span class="token operator">:</span><span class="token operator">:</span>updateUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">delete</span><span class="token punctuation">(</span>UserController<span class="token operator">:</span><span class="token operator">:</span>deleteUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">ws</span><span class="token punctuation">(</span><span class="token string">"events"</span><span class="token punctuation">,</span> UserController<span class="token operator">:</span><span class="token operator">:</span>webSocketEvents<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">routes</span> <span class="token punctuation">{</span>
    <span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"users"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">get</span><span class="token punctuation">(</span>UserController<span class="token operator">::</span>getAllUsers<span class="token punctuation">)</span>
        <span class="token function">post</span><span class="token punctuation">(</span>UserController<span class="token operator">::</span>createUser<span class="token punctuation">)</span>
        <span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"{id}"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">get</span><span class="token punctuation">(</span>UserController<span class="token operator">::</span>getUser<span class="token punctuation">)</span>
            <span class="token function">patch</span><span class="token punctuation">(</span>UserController<span class="token operator">::</span>updateUser<span class="token punctuation">)</span>
            <span class="token function">delete</span><span class="token punctuation">(</span>UserController<span class="token operator">::</span>deleteUser<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token function">ws</span><span class="token punctuation">(</span><span class="token string">"events"</span><span class="token punctuation">,</span> UserController<span class="token operator">::</span>webSocketEvents<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<p>Note that <code class=" highlighter-rouge language-plaintext">path()</code> prefixes your paths with <code class=" highlighter-rouge language-plaintext">/</code> (if you don’t add it yourself).<br>
This means that <code class=" highlighter-rouge language-plaintext">path("api", ...)</code> and <code class=" highlighter-rouge language-plaintext">path("/api", ...)</code> are equivalent.</p>

<h3 id="crudhandler">CrudHandler</h3>
<p>The <code class=" highlighter-rouge language-plaintext">CrudHandler</code> is an interface that can be used within a <code class=" highlighter-rouge language-plaintext">routes()</code> call:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">crud</span><span class="token punctuation">(</span><span class="token string">"users/{user-id}"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">UserController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">routes</span> <span class="token punctuation">{</span>
    <span class="token function">crud</span><span class="token punctuation">(</span><span class="token string">"users/{user-id}"</span><span class="token punctuation">,</span> <span class="token function">UserController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<p>It implements the five most common crud operations:</p>
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin"><span class="token keyword">interface</span> CrudHandler <span class="token punctuation">{</span>
    <span class="token function">getAll</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
    <span class="token function">getOne</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> resourceId<span class="token punctuation">)</span>
    <span class="token function">create</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
    <span class="token function">update</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> resourceId<span class="token punctuation">)</span>
    <span class="token function">delete</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> resourceId<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<h2 id="validation">Validation</h2>
<p>You can use Javalin’s <code class=" highlighter-rouge language-plaintext">Validator</code> class for query, form, and path parameters, as well as
headers and the request body:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">ctx<span class="token punctuation">.</span><span class="token function">queryParamAsClass</span><span class="token punctuation">(</span><span class="token string">"paramName"</span><span class="token punctuation">,</span> MyClass<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>   <span class="token comment" spellcheck="true">// creates a Validator&lt;MyClass&gt; for the value of queryParam("paramName")</span>
ctx<span class="token punctuation">.</span><span class="token function">formParamAsClass</span><span class="token punctuation">(</span><span class="token string">"paramName"</span><span class="token punctuation">,</span> MyClass<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">// creates a Validator&lt;MyClass&gt; for the value of formParam("paramName")</span>
ctx<span class="token punctuation">.</span><span class="token function">pathParamAsClass</span><span class="token punctuation">(</span><span class="token string">"paramName"</span><span class="token punctuation">,</span> MyClass<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">// creates a Validator&lt;MyClass&gt; for the value of pathParam("paramName")</span>
ctx<span class="token punctuation">.</span><span class="token function">headerAsClass</span><span class="token punctuation">(</span><span class="token string">"headerName"</span><span class="token punctuation">,</span> MyClass<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>      <span class="token comment" spellcheck="true">// creates a Validator&lt;MyClass&gt; for the value of header("paramName")</span>
ctx<span class="token punctuation">.</span><span class="token function">bodyValidator</span><span class="token punctuation">(</span>MyClass<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>                    <span class="token comment" spellcheck="true">// creates a Validator&lt;MyClass&gt; for the value of body()</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">ctx<span class="token punctuation">.</span>queryParamAsClass<span class="token operator">&lt;</span>MyClass<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"paramName"</span><span class="token punctuation">)</span>         <span class="token comment" spellcheck="true">// creates a Validator&lt;MyClass&gt; for the value of queryParam("paramName")</span>
ctx<span class="token punctuation">.</span>formParamAsClass<span class="token operator">&lt;</span>MyClass<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"paramName"</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// creates a Validator&lt;MyClass&gt; for the value of formParam("paramName")</span>
ctx<span class="token punctuation">.</span>pathParamAsClass<span class="token operator">&lt;</span>MyClass<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"paramName"</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// creates a Validator&lt;MyClass&gt; for the value of pathParam("paramName")</span>
ctx<span class="token punctuation">.</span>headerAsClass<span class="token operator">&lt;</span>MyClass<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"headerName"</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">// creates a Validator&lt;MyClass&gt; for the value of header("paramName")</span>
ctx<span class="token punctuation">.</span>bodyValidator<span class="token operator">&lt;</span>MyClass<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                        <span class="token comment" spellcheck="true">// creates a Validator&lt;MyClass&gt; for the value of body()</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<p>You can also create your own validator manually through
<code class=" highlighter-rouge language-plaintext">Validator.create(clazz, value, fieldName)</code>.</p>

<h3 id="validator-api">Validator API</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java"><span class="token function">allowNullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                     <span class="token comment" spellcheck="true">// turn the Validator into a NullableValidator (must be called first)</span>
<span class="token function">check</span><span class="token punctuation">(</span>predicate<span class="token punctuation">,</span> <span class="token string">"error"</span><span class="token punctuation">)</span>           <span class="token comment" spellcheck="true">// add a check with a ValidationError("error") to the Validator</span>
<span class="token function">check</span><span class="token punctuation">(</span>predicate<span class="token operator">:</span> validationError<span class="token punctuation">)</span>   <span class="token comment" spellcheck="true">// add a check with a ValidationError to the Validator (can have args for localization)</span>
<span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                               <span class="token comment" spellcheck="true">// return the validated value as the specified type, or throw ValidationException</span>
<span class="token function">getOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                      <span class="token comment" spellcheck="true">// return default-value if value is null, else call get()</span>
<span class="token function">errors</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                            <span class="token comment" spellcheck="true">// get all the errors of the Validator (as map("fieldName", List&lt;ValidationError&gt;))</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<h3 id="validation-examples">Validation examples</h3>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java"><span class="token comment" spellcheck="true">// VALIDATE A SINGLE QUERY PARAMETER WITH A DEFAULT VALUE /////////////////////////////////////////////</span>
Integer myValue <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">queryParamAsClass</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">,</span> Integer<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span><span class="token number">788</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// validate value</span>
ctx<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// return validated value to the client</span>
<span class="token comment" spellcheck="true">// GET ?value=a would yield HTTP 400 - {"my-qp":[{"message":"TYPE_CONVERSION_FAILED","args":{},"value":"a"}]}</span>
<span class="token comment" spellcheck="true">// GET ?value=1 would yield HTTP 200 - 1 (the validated value)</span>
<span class="token comment" spellcheck="true">// GET ?        would yield HTTP 200 - 788 (the default value)</span>


<span class="token comment" spellcheck="true">// VALIDATE TWO DEPENDENT QUERY PARAMETERS ////////////////////////////////////////////////////////////</span>
Instant fromDate <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">queryParamAsClass</span><span class="token punctuation">(</span><span class="token string">"from"</span><span class="token punctuation">,</span> Instant<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Instant toDate <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">queryParamAsClass</span><span class="token punctuation">(</span><span class="token string">"to"</span><span class="token punctuation">,</span> Instant<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span>it <span class="token operator">-</span><span class="token operator">&gt;</span> it<span class="token punctuation">.</span><span class="token function">isAfter</span><span class="token punctuation">(</span>fromDate<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"'to' has to be after 'from'"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment" spellcheck="true">// VALIDATE A JSON BODY ///////////////////////////////////////////////////////////////////////////////</span>
MyObject myObject <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">bodyValidator</span><span class="token punctuation">(</span>MyObject<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span>obj <span class="token operator">-</span><span class="token operator">&gt;</span> obj<span class="token punctuation">.</span>myObjectProperty <span class="token operator">==</span> someValue<span class="token punctuation">,</span> <span class="token string">"THINGS_MUST_BE_EQUAL"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// VALIDATE WITH CUSTOM VALIDATIONERROR ///////////////////////////////////////////////////////////////</span>
ctx<span class="token punctuation">.</span><span class="token function">queryParamAsClass</span><span class="token punctuation">(</span><span class="token string">"param"</span><span class="token punctuation">,</span> Integer<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">{</span> it <span class="token operator">&gt;</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ValidationError</span><span class="token punctuation">(</span><span class="token string">"OVER_LIMIT"</span><span class="token punctuation">,</span> Map<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"limit"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// GET ?param=10 would yield HTTP 400 - {"param":[{"message":"OVER_LIMIT","args":{"limit":5},"value":10}]}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin"><span class="token comment" spellcheck="true">// VALIDATE A SINGLE QUERY PARAMETER WITH A DEFAULT VALUE /////////////////////////////////////////////</span>
<span class="token keyword">val</span> myValue <span class="token operator">=</span> ctx<span class="token punctuation">.</span>queryParamAsClass<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span><span class="token number">788</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// validate value</span>
ctx<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// return validated value to the client</span>
<span class="token comment" spellcheck="true">// GET ?value=a would yield HTTP 400 - {"my-qp":[{"message":"TYPE_CONVERSION_FAILED","args":{},"value":"a"}]}</span>
<span class="token comment" spellcheck="true">// GET ?value=1 would yield HTTP 200 - 1 (the validated value)</span>
<span class="token comment" spellcheck="true">// GET ?        would yield HTTP 200 - 788 (the default value)</span>


<span class="token comment" spellcheck="true">// VALIDATE TWO DEPENDENT QUERY PARAMETERS ////////////////////////////////////////////////////////////</span>
<span class="token keyword">val</span> fromDate <span class="token operator">=</span> ctx<span class="token punctuation">.</span>queryParamAsClass<span class="token operator">&lt;</span>Instant<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"from"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> toDate <span class="token operator">=</span> ctx<span class="token punctuation">.</span>queryParamAsClass<span class="token operator">&lt;</span>Instant<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"to"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">{</span> it<span class="token punctuation">.</span><span class="token function">isAfter</span><span class="token punctuation">(</span>fromDate<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"'to' has to be after 'from'"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token comment" spellcheck="true">// VALIDATE A JSON BODY ///////////////////////////////////////////////////////////////////////////////</span>
<span class="token keyword">val</span> myObject <span class="token operator">=</span> ctx<span class="token punctuation">.</span>bodyValidator<span class="token operator">&lt;</span>MyObject<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">{</span> it<span class="token punctuation">.</span>myObjectProperty <span class="token operator">==</span> someValue <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"THINGS_MUST_BE_EQUAL"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// VALIDATE WITH CUSTOM VALIDATIONERROR ///////////////////////////////////////////////////////////////</span>
ctx<span class="token punctuation">.</span>queryParamAsClass<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"param"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">{</span> it <span class="token operator">&gt;</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token function">ValidationError</span><span class="token punctuation">(</span><span class="token string">"OVER_LIMIT"</span><span class="token punctuation">,</span> args <span class="token operator">=</span> <span class="token function">mapOf</span><span class="token punctuation">(</span><span class="token string">"limit"</span> <span class="token keyword">to</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// GET ?param=10 would yield HTTP 400 - {"param":[{"message":"OVER_LIMIT","args":{"limit":5},"value":10}]}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h3 id="collecting-multiple-errors">Collecting multiple errors</h3>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">Validator<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> ageValidator <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">queryParamAsClass</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span> Integer<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span>n <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token operator">!</span>n<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"ILLEGAL_CHARACTER"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// Empty map if no errors, otherwise a map with the key "age" and failed check messages in the list.</span>
Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;&gt;</span> errors <span class="token operator">=</span> ageValidator<span class="token punctuation">.</span><span class="token function">errors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Merges all errors from all validators in the list. Empty map if no errors exist.</span>
Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Object<span class="token operator">&gt;&gt;</span> manyErrors <span class="token operator">=</span> JavalinValidation<span class="token punctuation">.</span><span class="token function">collectErrors</span><span class="token punctuation">(</span>ageValidator<span class="token punctuation">,</span> otherValidator<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin"><span class="token keyword">val</span> ageValidator <span class="token operator">=</span> ctx<span class="token punctuation">.</span>queryParamAsClass<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">!</span>it<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"ILLEGAL_CHARACTER"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// Empty map if no errors, otherwise a map with the key "age" and failed check messages in the list.</span>
<span class="token keyword">val</span> errors <span class="token operator">=</span> ageValidator<span class="token punctuation">.</span><span class="token function">errors</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// Merges all errors from all validators in the list. Empty map if no errors exist.</span>
<span class="token keyword">val</span> manyErrors <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span>ageValidator<span class="token punctuation">,</span> otherValidator<span class="token punctuation">,</span> <span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h3 id="validationexception">ValidationException</h3>
<p>When a <code class=" highlighter-rouge language-plaintext">Validator</code> throws, it is mapped by:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">exception</span><span class="token punctuation">(</span>ValidationException<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span> <span class="token punctuation">{</span> e<span class="token punctuation">,</span> ctx <span class="token operator">-&gt;</span>
    ctx<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>errors<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<p>You can override this by doing:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">exception</span><span class="token punctuation">(</span>ValidationException<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>e<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// your code</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">exception</span><span class="token punctuation">(</span>ValidationException<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span> <span class="token punctuation">{</span> e<span class="token punctuation">,</span> ctx <span class="token operator">-&gt;</span>
    <span class="token comment" spellcheck="true">// your code</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h3 id="custom-converters">Custom converters</h3>
<p>If you need to validate a non-included class, you have to register a custom converter:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">JavalinValidation<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>Instant<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> v <span class="token operator">-</span><span class="token operator">&gt;</span> Instant<span class="token punctuation">.</span><span class="token function">ofEpochMilli</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">toLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">JavalinValidation<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>Instant<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span> <span class="token punctuation">{</span> Instant<span class="token punctuation">.</span><span class="token function">ofEpochMilli</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">toLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h2 id="access-manager">Access manager</h2>
<p>Javalin has a functional interface <code class=" highlighter-rouge language-plaintext">AccessManager</code>, which let’s you
set per-endpoint authentication and/or authorization. It’s also common to use
before-handlers for this, but enforcing per-endpoint roles give you much more
explicit and readable code. You can implement your access-manager however you want.
Below is an example implementation:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java"><span class="token comment" spellcheck="true">// Set the access-manager that Javalin should use</span>
config<span class="token punctuation">.</span><span class="token function">accessManager</span><span class="token punctuation">(</span><span class="token punctuation">(</span>handler<span class="token punctuation">,</span> ctx<span class="token punctuation">,</span> routeRoles<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    MyRole userRole <span class="token operator">=</span> <span class="token function">getUserRole</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>permittedRoles<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>userRole<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        handler<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">401</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token string">"Unauthorized"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Role <span class="token function">getUserRole</span><span class="token punctuation">(</span>Context ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// determine user role based on request.</span>
    <span class="token comment" spellcheck="true">// typically done by inspecting headers, cookies, or user session</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> Role <span class="token keyword">implements</span> <span class="token class-name">RouteRole</span> <span class="token punctuation">{</span>
    ANYONE<span class="token punctuation">,</span> ROLE_ONE<span class="token punctuation">,</span> ROLE_TWO<span class="token punctuation">,</span> ROLE_THREE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/un-secured"</span><span class="token punctuation">,</span>   ctx <span class="token operator">-</span><span class="token operator">&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   Role<span class="token punctuation">.</span>ANYONE<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/secured"</span><span class="token punctuation">,</span>      ctx <span class="token operator">-</span><span class="token operator">&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   Role<span class="token punctuation">.</span>ROLE_ONE<span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin"><span class="token comment" spellcheck="true">// Set the access-manager that Javalin should use</span>
config<span class="token punctuation">.</span><span class="token function">accessManager</span> <span class="token punctuation">{</span> handler<span class="token punctuation">,</span> ctx<span class="token punctuation">,</span> routeRoles <span class="token operator">-&gt;</span>
    <span class="token keyword">val</span> userRole <span class="token operator">=</span> <span class="token function">getUserRole</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// determine user role based on request</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>permittedRoles<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>userRole<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        handler<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">401</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token string">"Unauthorized"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">getUserRole</span><span class="token punctuation">(</span>ctx<span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token operator">:</span> Role <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// determine user role based on request.</span>
    <span class="token comment" spellcheck="true">// typically done by inspecting headers, cookies, or user session</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token keyword">class</span> Role <span class="token operator">:</span> RouteRole <span class="token punctuation">{</span>
    ANYONE<span class="token punctuation">,</span> ROLE_ONE<span class="token punctuation">,</span> ROLE_TWO<span class="token punctuation">,</span> ROLE_THREE
<span class="token punctuation">}</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/un-secured"</span><span class="token punctuation">,</span>   <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>   Role<span class="token punctuation">.</span>ANYONE<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/secured"</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>   Role<span class="token punctuation">.</span>ROLE_ONE<span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<p>The <code class=" highlighter-rouge language-plaintext">AccessManager</code> will also run before your WebSocket upgrade request
(if you have added roles to the endpoint), but keep in mind that WebSockets are long lived,
so it might be wise to perform a check in <code class=" highlighter-rouge language-plaintext">wsBefore</code> too/instead.</p>

<p>If you want to perform less restricted access management,
you should consider using a <code class=" highlighter-rouge language-plaintext">before</code> filter.</p>

<h2 id="default-responses">Default responses</h2>
<p>Javalin comes with a built in class called <code class=" highlighter-rouge language-plaintext">HttpResponseException</code>, which can be used for default responses.
If the client accepts JSON, a JSON object is returned. Otherwise a plain text response is returned.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ForbiddenResponse</span><span class="token punctuation">(</span><span class="token string">"Off limits!"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>
<p>If client accepts JSON:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java"><span class="token punctuation">{</span>
    <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"Off limits!"</span><span class="token punctuation">,</span>
    <span class="token string">"status"</span><span class="token operator">:</span> <span class="token number">403</span><span class="token punctuation">,</span>
    <span class="token string">"type"</span><span class="token operator">:</span> <span class="token string">"https://javalin.io/documentation#forbiddenresponse"</span><span class="token punctuation">,</span>
    <span class="token string">"details"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>
<p>Otherwise:</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight language-text code-toolbar"><code class=" language-text">Forbidden</code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<p>You can include a <code class=" highlighter-rouge language-plaintext">Map&lt;String, String&gt;</code> of details if you wish.</p>

<h3 id="redirectresponse">RedirectResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/302" target="_blank" rel="noopener">302 Found</a> response with the default title <code class=" highlighter-rouge language-plaintext">Redirected</code>.</p>

<h3 id="badrequestresponse">BadRequestResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400" target="_blank" rel="noopener">400 Bad Request</a> response with the default title <code class=" highlighter-rouge language-plaintext">Bad request</code>.</p>

<h3 id="unauthorizedresponse">UnauthorizedResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401" target="_blank" rel="noopener">401 Unauthorized</a> response with the default title <code class=" highlighter-rouge language-plaintext">Unauthorized</code>.</p>

<h3 id="forbiddenresponse">ForbiddenResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403" target="_blank" rel="noopener">403 Forbidden</a> response with the default title <code class=" highlighter-rouge language-plaintext">Forbidden</code>.</p>

<h3 id="notfoundresponse">NotFoundResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404" target="_blank" rel="noopener">404 Not Found</a> response with the default title <code class=" highlighter-rouge language-plaintext">Not found</code>.</p>

<h3 id="methodnotallowedresponse">MethodNotAllowedResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/405" target="_blank" rel="noopener">405 Method Not Allowed</a> response with the default title <code class=" highlighter-rouge language-plaintext">Method not allowed</code>.</p>

<h3 id="conflictresponse">ConflictResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409" target="_blank" rel="noopener">409 Conflict</a> response with the default title <code class=" highlighter-rouge language-plaintext">Conflict</code>.</p>

<h3 id="goneresponse">GoneResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/410" target="_blank" rel="noopener">410 Gone</a> response with the default title <code class=" highlighter-rouge language-plaintext">Gone</code>.</p>

<h3 id="internalservererrorresponse">InternalServerErrorResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500" target="_blank" rel="noopener">500 Internal Server Error</a> response with the default title <code class=" highlighter-rouge language-plaintext">Internal server error</code>.</p>

<h3 id="badgatewayresponse">BadGatewayResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502" target="_blank" rel="noopener">502 Bad Gateway</a> response with the default title <code class=" highlighter-rouge language-plaintext">Bad gateway</code>.</p>

<h3 id="serviceunavailableresponse">ServiceUnavailableResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503" target="_blank" rel="noopener">503 Service Unavailable</a> response with the default title <code class=" highlighter-rouge language-plaintext">Service unavailable</code>.</p>

<h3 id="gatewaytimeoutresponse">GatewayTimeoutResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/504" target="_blank" rel="noopener">504 Gateway Timeout</a> response with the default title <code class=" highlighter-rouge language-plaintext">Gateway timeout</code>.</p>

<h2 id="exception-mapping">Exception Mapping</h2>
<p>All handlers (before, endpoint, after) can throw <code class=" highlighter-rouge language-plaintext">Exception</code>
(and any subclass of <code class=" highlighter-rouge language-plaintext">Exception</code>)
The <code class=" highlighter-rouge language-plaintext">app.exception()</code> method gives you a way of handling these exceptions:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">exception</span><span class="token punctuation">(</span>NullPointerException<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>e<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// handle nullpointers here</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">exception</span><span class="token punctuation">(</span>Exception<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>e<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// handle general exceptions here</span>
    <span class="token comment" spellcheck="true">// will not trigger if more specific exception-mapper found</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">exception</span><span class="token punctuation">(</span>NullPointerException<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span> <span class="token punctuation">{</span> e<span class="token punctuation">,</span> ctx <span class="token operator">-&gt;</span>
    <span class="token comment" spellcheck="true">// handle nullpointers here</span>
<span class="token punctuation">}</span>

app<span class="token punctuation">.</span><span class="token function">exception</span><span class="token punctuation">(</span>Exception<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span> <span class="token punctuation">{</span> e<span class="token punctuation">,</span> ctx <span class="token operator">-&gt;</span>
    <span class="token comment" spellcheck="true">// handle general exceptions here</span>
    <span class="token comment" spellcheck="true">// will not trigger if more specific exception-mapper found</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h2 id="websocket-exception-mapping">WebSocket Exception Mapping</h2>
<p>The different WebSocket handlers throw exceptions. The <code class=" highlighter-rouge language-plaintext">app.wsException()</code> method gives you a way of handling these exceptions:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">wsException</span><span class="token punctuation">(</span>NullPointerException<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>e<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// handle nullpointers here</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">wsException</span><span class="token punctuation">(</span>Exception<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>e<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// handle general exceptions here</span>
    <span class="token comment" spellcheck="true">// will not trigger if more specific exception-mapper found</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">wsException</span><span class="token punctuation">(</span>NullPointerException<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span> <span class="token punctuation">{</span> e<span class="token punctuation">,</span> ctx <span class="token operator">-&gt;</span>
    <span class="token comment" spellcheck="true">// handle nullpointers here</span>
<span class="token punctuation">}</span>

app<span class="token punctuation">.</span><span class="token function">wsException</span><span class="token punctuation">(</span>Exception<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span> <span class="token punctuation">{</span> e<span class="token punctuation">,</span> ctx <span class="token operator">-&gt;</span>
    <span class="token comment" spellcheck="true">// handle general exceptions here</span>
    <span class="token comment" spellcheck="true">// will not trigger if more specific exception-mapper found</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h2 id="error-mapping">Error Mapping</h2>
<p>HTTP Error mapping is similar to exception mapping, but it operates on HTTP status codes instead of Exceptions:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">,</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token string">"Generic 404 message"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span>
    ctx<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token string">"Generic 404 message"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<p>It can make sense to use them together:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">exception</span><span class="token punctuation">(</span>FileNotFoundException<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>e<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">,</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token string">"Generic 404 message"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">exception</span><span class="token punctuation">(</span>FileNotFoundException<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span> <span class="token punctuation">{</span> e<span class="token punctuation">,</span> ctx <span class="token operator">-&gt;</span>
    ctx<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span>
    ctx<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token string">"Generic 404 message"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<p>You can also include the content type when declaring your error mappers:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">,</span> <span class="token string">"html"</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">"Generic 404 message"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">,</span> <span class="token string">"html"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span>
    ctx<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">"Generic 404 message"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<p>This can be useful if you, for example, want one set of error handlers for HTML, and one for JSON.</p>

<h2 id="server-sent-events">Server-sent Events</h2>
<p>Server-sent events (often also called event source) are very simple in Javalin.
You call <code class=" highlighter-rouge language-plaintext">app.sse()</code>, which gives you access to the connected <code class=" highlighter-rouge language-plaintext">SseClient</code>:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">sse</span><span class="token punctuation">(</span><span class="token string">"/sse"</span><span class="token punctuation">,</span> client <span class="token operator">-</span><span class="token operator">&gt;</span>
    client<span class="token punctuation">.</span><span class="token function">sendEvent</span><span class="token punctuation">(</span><span class="token string">"connected"</span><span class="token punctuation">,</span> <span class="token string">"Hello, SSE"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    client<span class="token punctuation">.</span><span class="token function">onClose</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Client disconnected"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">sse</span><span class="token punctuation">(</span><span class="token string">"/sse"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> client <span class="token operator">-&gt;</span>
    client<span class="token punctuation">.</span><span class="token function">sendEvent</span><span class="token punctuation">(</span><span class="token string">"connected"</span><span class="token punctuation">,</span> <span class="token string">"Hello, SSE"</span><span class="token punctuation">)</span>
    client<span class="token punctuation">.</span><span class="token function">onClose</span> <span class="token punctuation">{</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Client disconnected"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h3 id="sseclient-api">SseClient API</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java"><span class="token function">sendEvent</span><span class="token punctuation">(</span><span class="token string">"myMessage"</span><span class="token punctuation">)</span>                      <span class="token comment" spellcheck="true">// calls emit("message", "myMessage", noId)</span>
<span class="token function">sendEvent</span><span class="token punctuation">(</span><span class="token string">"eventName"</span><span class="token punctuation">,</span> <span class="token string">"myMessage"</span><span class="token punctuation">)</span>         <span class="token comment" spellcheck="true">// calls emit("eventName", "myMessage", noId)</span>
<span class="token function">sendEvent</span><span class="token punctuation">(</span><span class="token string">"eventName"</span><span class="token punctuation">,</span> <span class="token string">"myMessage"</span><span class="token punctuation">,</span> <span class="token string">"id"</span><span class="token punctuation">)</span>   <span class="token comment" spellcheck="true">// calls emit("eventName", "myMessage", "id")</span>
<span class="token function">onClose</span><span class="token punctuation">(</span>runnable<span class="token punctuation">)</span>                           <span class="token comment" spellcheck="true">// callback which runs when a client closes its connection</span>
ctx                                         <span class="token comment" spellcheck="true">// the Context from when the client connected (to fetch query-params, etc)</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<h2 id="configuration">Configuration</h2>

<p>You can pass a config object when creating a new instance of Javalin.</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">Javalin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span><span class="token function">addStaticFiles</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true">// your config here</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">Javalin<span class="token punctuation">.</span><span class="token function">create</span> <span class="token punctuation">{</span> config <span class="token operator">-&gt;</span>
    config<span class="token punctuation">.</span><span class="token function">addStaticFiles</span><span class="token punctuation">(</span><span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true">// your config here</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h3 id="available-config-options">Available config options</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java"><span class="token comment" spellcheck="true">// HTTP</span>
autogenerateEtags <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                      <span class="token comment" spellcheck="true">// generate etags for responses</span>
prefer405over404 <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                       <span class="token comment" spellcheck="true">// return 405 instead of 404 if path is mapped to different HTTP method</span>
enforceSsl <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                             <span class="token comment" spellcheck="true">// redirect all http requests to https</span>
defaultContentType <span class="token operator">=</span> <span class="token string">"text/plain"</span><span class="token punctuation">;</span>              <span class="token comment" spellcheck="true">// the default content type</span>
maxRequestSize <span class="token operator">=</span> 1_000_000L<span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">// either increase this or use inputstream to handle large requests</span>
asyncRequestTimeout <span class="token operator">=</span> 0L<span class="token punctuation">;</span>                       <span class="token comment" spellcheck="true">// timeout in milliseconds for async requests (0 means no timeout)</span>
<span class="token function">addSinglePageRoot</span><span class="token punctuation">(</span><span class="token string">"/path"</span><span class="token punctuation">,</span> <span class="token string">"/file"</span><span class="token punctuation">)</span>             <span class="token comment" spellcheck="true">// fancy 404 handler that returns the specified file for 404s on /path</span>
<span class="token function">addSinglePageRoot</span><span class="token punctuation">(</span><span class="token string">"/path"</span><span class="token punctuation">,</span> <span class="token string">"/file"</span><span class="token punctuation">,</span> location<span class="token punctuation">)</span>   <span class="token comment" spellcheck="true">// fancy 404 handler that returns the specified file for 404s on /path</span>
<span class="token function">addSinglePageHandler</span><span class="token punctuation">(</span><span class="token string">"/path"</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// fancy 404 handler that runs the specified Handler for 404s on /path</span>
<span class="token function">addStaticFiles</span><span class="token punctuation">(</span><span class="token string">"/directory"</span><span class="token punctuation">,</span> location<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// add static files in directory at location (Location.CLASSPATH/Location.EXTERNAL)</span>
<span class="token function">addStaticFiles</span><span class="token punctuation">(</span>staticFileConfig<span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">// add static files by StaticFileConfig, see Static Files section</span>
<span class="token function">enableWebjars</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                 <span class="token comment" spellcheck="true">// add static files though webjars</span>
<span class="token function">enableCorsForAllOrigins</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                       <span class="token comment" spellcheck="true">// enable CORS for all origins</span>
<span class="token function">enableCorsForOrigin</span><span class="token punctuation">(</span><span class="token string">"origin1"</span><span class="token punctuation">,</span> <span class="token string">"origin2"</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// enable CORS the specified origins</span>
<span class="token function">enableDevLogging</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                              <span class="token comment" spellcheck="true">// enable dev logging (extensive debug logging meant for development)</span>
<span class="token function">registerPlugin</span><span class="token punctuation">(</span>myPlugin<span class="token punctuation">)</span>                        <span class="token comment" spellcheck="true">// register a plugin</span>
<span class="token function">requestLogger</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> timeInMs<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">// register a request logger</span>

<span class="token comment" spellcheck="true">// WebSocket</span>
<span class="token function">wsFactoryConfig</span><span class="token punctuation">(</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">// configure the Jetty WebSocketServletFactory</span>
<span class="token function">wsLogger</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ws<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>                            <span class="token comment" spellcheck="true">// register a WebSocket logger</span>

<span class="token comment" spellcheck="true">// Server</span>
ignoreTrailingSlashes <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                   <span class="token comment" spellcheck="true">// treat '/path' and '/path/' as the same path</span>
contextPath <span class="token operator">=</span> <span class="token string">"/"</span><span class="token punctuation">;</span>                              <span class="token comment" spellcheck="true">// the context path (ex '/blog' if you are hosting an app on a subpath, like 'mydomain.com/blog')</span>
<span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token function">Server</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                          <span class="token comment" spellcheck="true">// set the Jetty Server</span>
<span class="token function">sessionHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token function">SessionHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// set the Jetty SessionHandler</span>
<span class="token function">configureServletContextHandler</span><span class="token punctuation">(</span>handler <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>   <span class="token comment" spellcheck="true">// configure the Jetty ServletContextHandler</span>
<span class="token function">jsonMapper</span><span class="token punctuation">(</span>jsonMapper<span class="token punctuation">)</span>                          <span class="token comment" spellcheck="true">// configure Javalin's JsonMapper</span>

<span class="token comment" spellcheck="true">// Misc</span>
showJavalinBanner <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                       <span class="token comment" spellcheck="true">// show the glorious Javalin banner on startup</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<h3 id="static-files" data-scroll-id="static-files" tabindex="-1" style="outline: none;">Static Files</h3>
<p>You can enabled static file serving by doing <code class=" highlighter-rouge language-plaintext">config.addStaticFiles("/directory", location)</code>.
Static resource handling is done <strong>after</strong> endpoint matching, meaning your own
GET endpoints have higher priority. The process looks like this:</p>

<pre class="language-txt code-toolbar"><code class=" language-txt">run before-handlers
run endpoint-handlers
if no endpoint-handler found
    run static-file-handlers
    if static-file-found
        static-file-handler sends response
    else
        response is 404
run after-handlers</code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre>

<h4 id="staticfileconfig">StaticFileConfig</h4>
<p>For more advanced use cases, Javalin has a <code class=" highlighter-rouge language-plaintext">StaticFileConfig</code> class:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">Javalin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  config<span class="token punctuation">.</span><span class="token function">addStaticFiles</span><span class="token punctuation">(</span>staticFiles <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    staticFiles<span class="token punctuation">.</span>hostedPath <span class="token operator">=</span> <span class="token string">"/"</span><span class="token punctuation">;</span>                   <span class="token comment" spellcheck="true">// change to host files on a subpath, like '/assets'</span>
    staticFiles<span class="token punctuation">.</span>directory <span class="token operator">=</span> <span class="token string">"/public"</span><span class="token punctuation">;</span>              <span class="token comment" spellcheck="true">// the directory where your files are located</span>
    staticFiles<span class="token punctuation">.</span>location <span class="token operator">=</span> Location<span class="token punctuation">.</span>CLASSPATH<span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// Location.CLASSPATH (jar) or Location.EXTERNAL (file system)</span>
    staticFiles<span class="token punctuation">.</span>precompress <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// if the files should be pre-compressed and cached in memory (optimization)</span>
    staticFiles<span class="token punctuation">.</span>aliasCheck <span class="token operator">=</span> null<span class="token punctuation">;</span>                  <span class="token comment" spellcheck="true">// you can configure this to enable symlinks (= ContextHandler.ApproveAliases())</span>
    staticFiles<span class="token punctuation">.</span>headers <span class="token operator">=</span> Map<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment" spellcheck="true">// headers that will be set for the files</span>
    staticFiles<span class="token punctuation">.</span>skipFileFunction <span class="token operator">=</span> req <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// you can use this to skip certain files in the dir, based on the HttpServletRequest</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">Javalin<span class="token punctuation">.</span><span class="token function">create</span> <span class="token punctuation">{</span> config <span class="token operator">-&gt;</span>
  config<span class="token punctuation">.</span><span class="token function">addStaticFiles</span> <span class="token punctuation">{</span> staticFiles <span class="token operator">-&gt;</span>
    staticFiles<span class="token punctuation">.</span>hostedPath <span class="token operator">=</span> <span class="token string">"/"</span>                    <span class="token comment" spellcheck="true">// change to host files on a subpath, like '/assets'</span>
    staticFiles<span class="token punctuation">.</span>directory <span class="token operator">=</span> <span class="token string">"/public"</span>               <span class="token comment" spellcheck="true">// the directory where your files are located</span>
    staticFiles<span class="token punctuation">.</span>location <span class="token operator">=</span> Location<span class="token punctuation">.</span>CLASSPATH       <span class="token comment" spellcheck="true">// Location.CLASSPATH (jar) or Location.EXTERNAL (file system)</span>
    staticFiles<span class="token punctuation">.</span>precompress <span class="token operator">=</span> <span class="token boolean">false</span>                 <span class="token comment" spellcheck="true">// if the files should be pre-compressed and cached in memory (optimization)</span>
    staticFiles<span class="token punctuation">.</span>aliasCheck <span class="token operator">=</span> <span class="token keyword">null</span>                   <span class="token comment" spellcheck="true">// you can configure this to enable symlinks (= ContextHandler.ApproveAliases())</span>
    staticFiles<span class="token punctuation">.</span>headers <span class="token operator">=</span> <span class="token function">mapOf</span><span class="token punctuation">(</span><span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">// headers that will be set for the files</span>
    staticFiles<span class="token punctuation">.</span>skipFileFunction <span class="token operator">=</span> <span class="token punctuation">{</span> req <span class="token operator">-&gt;</span> <span class="token boolean">false</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// you can use this to skip certain files in the dir, based on the HttpServletRequest</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<p>You can call <code class=" highlighter-rouge language-plaintext">addStaticFiles</code> multiple times to set up multiple handlers.
No configuration is shared between handlers.</p>

<h4 id="webjars">WebJars</h4>
<p>WebJars can be enabled by calling <code class=" highlighter-rouge language-plaintext">enableWebJars()</code>,
they will be available at <code class=" highlighter-rouge language-plaintext">/webjars/name/version/file.ext</code>.
WebJars can be found on <a href="https://www.webjars.org/" target="_blank" rel="noopener">https://www.webjars.org/</a>.
Everything available through NPM is also available through WebJars.</p>

<h3 id="single-page-mode">Single page mode</h3>
<p>Single page mode is similar to static file handling. It runs after endpoint matching, and after static file handling.
It’s basically a very fancy 404 mapper, which converts any 404’s into a specified page.
You can define multiple single page handlers for your application by specifying different root paths.</p>

<p>You can enabled single page mode by doing <code class=" highlighter-rouge language-plaintext">config.addSinglePageRoot("/root", "/path/to/file.html")</code>, and/or
<code class=" highlighter-rouge language-plaintext">config.addSinglePageRoot("/root", "/path/to/file.html", Location.EXTERNAL)</code>.</p>

<h4 id="dynamic-single-page-handler">Dynamic single page handler</h4>
<p>You can also use a <code class=" highlighter-rouge language-plaintext">Handler</code> to serve your single page root (as opposed to a static file):</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">config<span class="token punctuation">.</span><span class="token function">addSinglePageHandler</span><span class="token punctuation">(</span><span class="token string">"/root"</span><span class="token punctuation">,</span>  ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<h3 id="logging">Logging</h3>

<h4 id="adding-a-logger">Adding a logger</h4>

<p>Javalin does not have a logger included,
which means that you have to add your own logger. If you don’t know/care
a lot about Java loggers, the easiest way to fix this is to add the following
dependency to your project:</p>

<pre class="language-markup code-toolbar"><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-simple<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.7.32<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre>

<h4 id="request-logging">Request logging</h4>
<p>You can add a HTTP request logger by calling <code class=" highlighter-rouge language-plaintext">config.requestLogger()</code>.
The method takes a <code class=" highlighter-rouge language-plaintext">Context</code> and the time in milliseconds it took to finish the request:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">Javalin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span><span class="token function">requestLogger</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> ms<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// log things here</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">Javalin<span class="token punctuation">.</span><span class="token function">create</span> <span class="token punctuation">{</span> config <span class="token operator">-&gt;</span>
    config<span class="token punctuation">.</span><span class="token function">requestLogger</span> <span class="token punctuation">{</span> ctx<span class="token punctuation">,</span> ms <span class="token operator">-&gt;</span>
        <span class="token comment" spellcheck="true">// log things here</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h4 id="websocket-logging">WebSocket logging</h4>
<p>You can add a WebSocket logger by calling <code class=" highlighter-rouge language-plaintext">config.wsLogger()</code>. The method takes a <code class=" highlighter-rouge language-plaintext">WsHandler</code>,
(the same interface as a normal <code class=" highlighter-rouge language-plaintext">app.ws()</code> call), and can be used to log events of all types.
The following example just shows <code class=" highlighter-rouge language-plaintext">onMessage</code>, but <code class=" highlighter-rouge language-plaintext">onConnect</code>, <code class=" highlighter-rouge language-plaintext">onError</code> and <code class=" highlighter-rouge language-plaintext">onClose</code> are all available:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span><span class="token function">wsLogger</span><span class="token punctuation">(</span>ws <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        ws<span class="token punctuation">.</span><span class="token function">onMessage</span><span class="token punctuation">(</span>ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Received: "</span> <span class="token operator">+</span> ctx<span class="token punctuation">.</span><span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">create</span> <span class="token punctuation">{</span> config <span class="token operator">-&gt;</span>
    config<span class="token punctuation">.</span><span class="token function">wsLogger</span><span class="token punctuation">(</span>ws <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        ws<span class="token punctuation">.</span><span class="token function">onMessage</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span>
            <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Received: "</span> <span class="token operator">+</span> ctx<span class="token punctuation">.</span><span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<p>The logger runs after the WebSocket handler for the endpoint.</p>

<h4 id="dev-logging">Dev logging</h4>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span><span class="token function">enableDevLogging</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// enable extensive development logging for http and websocket</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">create</span> <span class="token punctuation">{</span> config <span class="token operator">-&gt;</span>
    config<span class="token punctuation">.</span><span class="token function">enableDevLogging</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// enable extensive development logging for http and websocket</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h3 id="server-setup">Server setup</h3>

<p>Javalin runs on an embedded <a href="https://eclipse.org/jetty/" target="_blank" rel="noopener">Jetty</a>. To start and stop the server,
use <code class=" highlighter-rouge language-plaintext">start()</code> and <code class=" highlighter-rouge language-plaintext">stop</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">Javalin app <span class="token operator">=</span> Javalin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// start server (sync/blocking)</span>
    <span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// stop server (sync/blocking)</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<p>The <code class=" highlighter-rouge language-plaintext">app.start()</code> method spawns a user thread, starts the server, and then returns.
Your program will not exit until this thread is terminated by calling <code class=" highlighter-rouge language-plaintext">app.stop()</code>.</p>

<p>If you want to do a clean shutdown when the program is exiting, you could use:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">Runtime<span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addShutdownHook</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
	app<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">events</span><span class="token punctuation">(</span>event <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">serverStopping</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">/* Your code here */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    event<span class="token punctuation">.</span><span class="token function">serverStopped</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">/* Your code here */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<h4 id="setting-the-host">Setting the Host</h4>

<p>The <code class=" highlighter-rouge language-plaintext">Javalin#start</code> method is overloaded to accept the Host (IP) as the first argument:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">Javalin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token number">1235</span><span class="token punctuation">)</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<h4 id="custom-server">Custom server</h4>
<p>If you need to customize the embedded server, you can call the <code class=" highlighter-rouge language-plaintext">server()</code> method:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span><span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        Server server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Server</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// configure this however you want</span>
        <span class="token keyword">return</span> server<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">create</span> <span class="token punctuation">{</span> config <span class="token operator">-&gt;</span>
    config<span class="token punctuation">.</span><span class="token function">server</span> <span class="token punctuation">{</span>
        <span class="token keyword">val</span> server <span class="token operator">=</span> <span class="token function">Server</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// configure this however you want</span>
        server
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h4 id="custom-sessionhandler">Custom SessionHandler</h4>

<p>You can configure the <code class=" highlighter-rouge language-plaintext">SessionHandler</code> by calling the <code class=" highlighter-rouge language-plaintext">sessionHandler(...)</code> method.</p>

<p>If you want to persist sessions to the file system, you can use a <code class=" highlighter-rouge language-plaintext">FileSessionDataStore</code>:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">fileSessionHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">SessionHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>
    httpOnly <span class="token operator">=</span> <span class="token boolean">true</span>
    sessionCache <span class="token operator">=</span> <span class="token function">DefaultSessionCache</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>
        sessionDataStore <span class="token operator">=</span> <span class="token function">FileSessionDataStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>
            <span class="token keyword">val</span> baseDir <span class="token operator">=</span> <span class="token function">File</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"java.io.tmpdir"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            storeDir <span class="token operator">=</span> <span class="token function">File</span><span class="token punctuation">(</span>baseDir<span class="token punctuation">,</span> <span class="token string">"javalin-session-store"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span> <span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<p>Read more about how to configure sessions in our
<a href="https://javalin.io/tutorials/jetty-session-handling">session tutorial</a>.</p>

<h4 id="custom-jetty-handlers">Custom jetty handlers</h4>
<p>You can configure your embedded jetty-server with a handler-chain
(<a href="https://github.com/tipsy/javalin/blob/master/javalin/src/test/java/io/javalin/TestCustomJetty.kt#L71-L87" target="_blank" rel="noopener">example</a>),
and Javalin will attach it’s own handlers to the end of this chain.</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">StatisticsHandler statisticsHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StatisticsHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Javalin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span><span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        Server server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Server</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        server<span class="token punctuation">.</span><span class="token function">setHandler</span><span class="token punctuation">(</span>statisticsHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> server<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin"><span class="token keyword">val</span> statisticsHandler <span class="token operator">=</span> <span class="token function">StatisticsHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

Javalin<span class="token punctuation">.</span><span class="token function">create</span> <span class="token punctuation">{</span> config <span class="token operator">-&gt;</span>
    config<span class="token punctuation">.</span><span class="token function">server</span> <span class="token punctuation">{</span>
        <span class="token function">Server</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>
            handler <span class="token operator">=</span> statisticsHandler
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h4 id="sslhttp2">SSL/HTTP2</h4>

<p>To configure SSL or HTTP2 you need to use a custom server (see previous section).<br>
An example of a custom server with SSL can be found in the examples,
<a href="https://github.com/tipsy/javalin/blob/master/javalin/src/test/java/io/javalin/examples/HelloWorldSecure.java#L22-L30" target="_blank" rel="noopener">HelloWorldSecure</a>.</p>

<p>A custom HTTP2 server is a bit more work to set up, but we have a repo with a
fully functioning example server in both Kotlin and Java: <a href="https://github.com/tipsy/javalin-http2-example" target="_blank" rel="noopener">javalin-http2-example</a></p>

<h2 id="lifecycle-events">Lifecycle events</h2>
<p>Javalin has events for server start/stop, as well as for when handlers are added.
The snippet below shows all of them in action:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">Javalin app <span class="token operator">=</span> Javalin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">events</span><span class="token punctuation">(</span>event <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">serverStarting</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    event<span class="token punctuation">.</span><span class="token function">serverStarted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    event<span class="token punctuation">.</span><span class="token function">serverStartFailed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    event<span class="token punctuation">.</span><span class="token function">serverStopping</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    event<span class="token punctuation">.</span><span class="token function">serverStopped</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    event<span class="token punctuation">.</span><span class="token function">handlerAdded</span><span class="token punctuation">(</span>handlerMetaInfo <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    event<span class="token punctuation">.</span><span class="token function">wsHandlerAdded</span><span class="token punctuation">(</span>wsHandlerMetaInfo <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// serverStarting -&gt; (serverStarted || serverStartFailed)</span>
app<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// serverStopping -&gt; serverStopped</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">Javalin app <span class="token operator">=</span> Javalin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">events</span> <span class="token punctuation">{</span> event <span class="token operator">-&gt;</span>
    event<span class="token punctuation">.</span><span class="token function">serverStarting</span> <span class="token punctuation">{</span> <span class="token operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
    event<span class="token punctuation">.</span><span class="token function">serverStarted</span> <span class="token punctuation">{</span> <span class="token operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
    event<span class="token punctuation">.</span><span class="token function">serverStartFailed</span> <span class="token punctuation">{</span> <span class="token operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
    event<span class="token punctuation">.</span><span class="token function">serverStopping</span> <span class="token punctuation">{</span> <span class="token operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
    event<span class="token punctuation">.</span><span class="token function">serverStopped</span> <span class="token punctuation">{</span> <span class="token operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
    event<span class="token punctuation">.</span><span class="token function">handlerAdded</span> <span class="token punctuation">{</span> handlerMetaInfo <span class="token operator">-&gt;</span> <span class="token punctuation">}</span>
    event<span class="token punctuation">.</span><span class="token function">wsHandlerAdded</span> <span class="token punctuation">{</span> wsHandlerMetaInfo <span class="token operator">-&gt;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

app<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// serverStarting -&gt; (serverStarted || serverStartFailed)</span>
app<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// serverStopping -&gt; serverStopped</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<h2 id="plugins">Plugins</h2>
<p>Javalin’s plugin system has two interfaces, <code class=" highlighter-rouge language-plaintext">Plugin</code> and <code class=" highlighter-rouge language-plaintext">PluginLifecycleInit</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java"><span class="token keyword">interface</span> <span class="token class-name">Plugin</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NotNull</span> Javalin app<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">PluginLifecycleInit</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NotNull</span> Javalin app<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<p>When implementing <code class=" highlighter-rouge language-plaintext">PluginLifecycleInit#init</code>, you are not allowed to add <code class=" highlighter-rouge language-plaintext">Handler</code> instances to the app.<br>
The two interface methods are called like this during setup:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">initPlugins<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>plugin <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    plugin<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// will throw exception if `init` adds Handler</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

plugins<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>plugin <span class="token operator">-</span><span class="token operator">&gt;</span> plugin<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<p>This is mainly so each plugin has a chance to add <code class=" highlighter-rouge language-plaintext">handlerAdded</code> listeners before other plugins
add <em>their</em> handlers, so that each plugin has a complete overview of all handlers.</p>

<h3 id="route-overview-plugin">Route overview plugin</h3>

<p>You can enable a HTML page showing all the routes of your application by registering it on the config:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">Javalin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config <span class="token operator">-</span><span class="token operator">&gt;</span>
    config<span class="token punctuation">.</span><span class="token function">registerPlugin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RouteOverviewPlugin</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// show all routes on specified path</span>
    config<span class="token punctuation">.</span><span class="token function">registerPlugin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RouteOverviewPlugin</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> roles<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// show all routes on specified path (with auth)</span>
<span class="token punctuation">)</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<h3 id="micrometer-plugin">Micrometer Plugin</h3>

<p>You can enable the Micrometer plugin by registering it on the config:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">Javalin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config <span class="token operator">-</span><span class="token operator">&gt;</span>
    config<span class="token punctuation">.</span><span class="token function">registerPlugin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MicrometerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">)</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<p>Additional documentation for the plugin can be found <a href="https://javalin.io/plugins/micrometer">here</a>.</p>

<h3 id="openapi-plugin">OpenAPI Plugin</h3>

<p>Javalin has an OpenAPI (Swagger) plugin. Full documentation for the plugin can be found <a href="https://javalin.io/plugins/openapi">here</a>,
below are a few examples:</p>

<h4 id="openapi-dsl">OpenAPI DSL</h4>
<p>When using the OpenAPI DSL you define an <code class=" highlighter-rouge language-plaintext">OpenApiDocumentation</code> object to pair with your <code class=" highlighter-rouge language-plaintext">Handler</code>:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin"><span class="token keyword">val</span> addUserDocs <span class="token operator">=</span> <span class="token function">document</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>body<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>result<span class="token operator">&lt;</span>Unit<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"400"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>result<span class="token operator">&lt;</span>Unit<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"204"</span><span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">addUserHandler</span><span class="token punctuation">(</span>ctx<span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> user <span class="token operator">=</span> ctx<span class="token punctuation">.</span>body<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    UserRepository<span class="token punctuation">.</span><span class="token function">addUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">204</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<p>You then combine these when you add your routes:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin"><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/users"</span><span class="token punctuation">,</span> <span class="token function">documented</span><span class="token punctuation">(</span>addUserDocs<span class="token punctuation">,</span> <span class="token operator">::</span>addUserHandler<span class="token punctuation">)</span><span class="token punctuation">)</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<h4 id="openapi-annotations">OpenAPI annotations</h4>

<p>If you prefer to keep your documentation separate from your code, you can use annotations instead:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin"><span class="token annotation builtin">@OpenApi</span><span class="token punctuation">(</span>
    requestBody <span class="token operator">=</span> <span class="token function">OpenApiRequestBody</span><span class="token punctuation">(</span>User<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    responses <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token function">OpenApiResponse</span><span class="token punctuation">(</span><span class="token string">"400"</span><span class="token punctuation">,</span> Unit<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">OpenApiResponse</span><span class="token punctuation">(</span><span class="token string">"201"</span><span class="token punctuation">,</span> Unit<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">)</span>
<span class="token keyword">fun</span> <span class="token function">createUser</span><span class="token punctuation">(</span>ctx<span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> user <span class="token operator">=</span> ctx<span class="token punctuation">.</span>body<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    UserRepository<span class="token punctuation">.</span><span class="token function">createUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">201</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<p>If you use the annotation API you don’t need to connect the documentation and the handler manually,
you just reference your handler as normal:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin"><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/users"</span><span class="token punctuation">,</span> <span class="token operator">::</span>addUserHandler<span class="token punctuation">)</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<p>Javalin will then extract the information from the annotation and build the documentation automatically.</p>

<p>To enable hosted docs you have to specify some paths in your Javalin config:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin"><span class="token keyword">val</span> app <span class="token operator">=</span> Javalin<span class="token punctuation">.</span><span class="token function">create</span> <span class="token punctuation">{</span>
    it<span class="token punctuation">.</span><span class="token function">enableOpenApi</span><span class="token punctuation">(</span>
            <span class="token function">OpenApiOptions</span><span class="token punctuation">(</span><span class="token function">Info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token string">"1.0"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"My Application"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/swagger-json"</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">swagger</span><span class="token punctuation">(</span><span class="token function">SwaggerOptions</span><span class="token punctuation">(</span><span class="token string">"/swagger"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">"My Swagger Documentation"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">reDoc</span><span class="token punctuation">(</span><span class="token function">ReDocOptions</span><span class="token punctuation">(</span><span class="token string">"/redoc"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">"My ReDoc Documentation"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<p>Full documentation for the OpenAPI plugin can be found at <a href="https://javalin.io/plugins/openapi">/plugins/openapi</a>.</p>

<h3 id="graphql-plugin">GraphQL plugin</h3>
<p>Javalin has an GraphQL plugin. You can see its documentation at <a href="https://javalin.io/plugins/graphql">/plugins/graphql</a>.</p>

<h3 id="redirect-to-lowercase-path-plugin">Redirect-to-lowercase-path plugin</h3>

<p>This plugin redirects requests with uppercase/mixcase paths to lowercase paths.
For example, <code class=" highlighter-rouge language-plaintext">/Users/John</code> redirects to <code class=" highlighter-rouge language-plaintext">/users/John</code> (if endpoint is <code class=" highlighter-rouge language-plaintext">/users/:userId</code>).
It does not affect the casing of path-params and query-params, only static
URL fragments (<code class=" highlighter-rouge language-plaintext">Users</code> becomes <code class=" highlighter-rouge language-plaintext">users</code> above, but <code class=" highlighter-rouge language-plaintext">John</code> remains <code class=" highlighter-rouge language-plaintext">John</code>).<br>
When using this plugin, you can only add paths with lowercase URL fragments.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">Javalin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config <span class="token operator">-</span><span class="token operator">&gt;</span>
    config<span class="token punctuation">.</span><span class="token function">registerPlugin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RedirectToLowercasePathPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">)</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<h2 id="different-javalin-modules">Different Javalin modules</h2>

<p>Javalin is a multi-module project. The current modules (for <code class=" highlighter-rouge language-plaintext">4.3.0</code>)  are:</p>

<ul>
  <li><code class=" highlighter-rouge language-plaintext">javalin</code> - the standard Javalin dependency, just as before</li>
  <li><code class=" highlighter-rouge language-plaintext">javalin-bundle</code> - <code class=" highlighter-rouge language-plaintext">javalin</code>, <code class=" highlighter-rouge language-plaintext">javalin-openapi</code>, <code class=" highlighter-rouge language-plaintext">jackson</code> and <code class=" highlighter-rouge language-plaintext">logback</code></li>
  <li><code class=" highlighter-rouge language-plaintext">javalin-openapi</code> - the OpenAPI plugin and all required dependencies</li>
  <li><code class=" highlighter-rouge language-plaintext">javalin-testtools</code> - tools for easily writing integration tests for Javalin apps</li>
  <li><code class=" highlighter-rouge language-plaintext">javalin-graphql</code> - the new GraphQL plugin (thanks to <a href="https://github.com/7agustibm" target="_blank" rel="noopener">7agustibm</a>)</li>
  <li><code class=" highlighter-rouge language-plaintext">javalin-without-jetty</code> - <code class=" highlighter-rouge language-plaintext">javalin</code> with all <code class=" highlighter-rouge language-plaintext">jetty</code> dependencies excluded
and Jetty specific methods removed (useful for running on e.g. Tomcat)</li>
</ul>

<h2 id="faq">FAQ</h2>
<p>Frequently asked questions.</p>

<h3 id="request-lifecycle">Request lifecycle</h3>
<p>The Javalin request lifecycle is pretty straightforward.
The following snippet covers every place you can hook into:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">Javalin#before              <span class="token comment" spellcheck="true">// runs first, can throw exception (which will skip any endpoint handlers)</span>
Javalin#get<span class="token operator">/</span>post<span class="token operator">/</span>patch<span class="token operator">/</span>etc  <span class="token comment" spellcheck="true">// runs second, can throw exception</span>
Javalin#error               <span class="token comment" spellcheck="true">// runs third, can throw exception</span>
Javalin#after               <span class="token comment" spellcheck="true">// runs fourth, can throw exception</span>
Javalin#exception           <span class="token comment" spellcheck="true">// runs any time a handler throws (cannot throw exception)</span>
JavalinConfig#requestLogger <span class="token comment" spellcheck="true">// runs after response is written to client</span>
JavalinConfig#accessManager <span class="token comment" spellcheck="true">// wraps all your endpoint handlers in a lambda of your choice</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<hr>

<h3 id="rate-limiting">Rate limiting</h3>
<p>There is a very simple rate limiter included in Javalin.
You can call it in the beginning of your endpoint <code class=" highlighter-rouge language-plaintext">Handler</code> functions:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    NaiveRateLimit<span class="token punctuation">.</span><span class="token function">requestPerTimeUnit</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> TimeUnit<span class="token punctuation">.</span>MINUTES<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// throws if rate limit is exceeded</span>
    ctx<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token string">"Hello, rate-limited World!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// you can overwrite the key-function:</span>
RateLimitUti<span class="token punctuation">.</span>keyFunction <span class="token operator">=</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token comment" spellcheck="true">// uses (ip+method+endpointPath) by default</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span>
    NaiveRateLimit<span class="token punctuation">.</span><span class="token function">requestPerTimeUnit</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> TimeUnit<span class="token punctuation">.</span>MINUTES<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// throws if rate limit is exceeded</span>
    ctx<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token string">"Hello, rate-limited World!"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// you can overwrite the key-function:</span>
RateLimitUti<span class="token punctuation">.</span>keyFunction <span class="token operator">=</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// uses (ip+method+endpointPath) by default</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<p>Different endpoints can have different rate limits. It works as follows:</p>

<ul>
  <li>A map of maps holds counter per key.</li>
  <li>On each request the counter for that key is incremented.</li>
  <li>If the counter exceeds the number of requests specified, an exception is thrown.</li>
  <li>All counters are cleared periodically on every timeunit that you specified.</li>
</ul>

<hr>

<h3 id="android">Android</h3>
<p>To use Javalin in an Android project, you will need to:</p>

<p><em>1: Target the Android SDK 26 and higher:</em></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight language-plaintext code-toolbar"><code class=" language-plaintext">defaultconfig {
  minSdkVersion 26
  targetSdkVersion 28
}</code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<p><em>2: Target Java 8:</em></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight language-plaintext code-toolbar"><code class=" language-plaintext">compileOptions {
    sourceCompatibility JavaVersion.VERSION_1_8
    targetCompatibility JavaVersion.VERSION_1_8
}</code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<p><em>3: Insert this in your build.gradle file:</em></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight language-plaintext code-toolbar"><code class=" language-plaintext">packagingOptions {
  exclude 'org/eclipse/jetty/http/encoding.properties'
}</code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<p><em>4: Specify <code class=" highlighter-rouge language-plaintext">android.enableD8=true</code> in your <code class=" highlighter-rouge language-plaintext">gradle.properties</code> file.</em></p>

<hr>

<h3 id="concurrency">Concurrency</h3>

<p>By default, Javalin serves requests using a Jetty <code class=" highlighter-rouge language-plaintext">QueuedThreadPool</code> with 250 threads.
Handlers are invoked in parallel on multiple threads, so all handler implementations should be thread-safe.</p>

<p>The default configuration adds a very thin abstraction layer on top of Jetty. It has similar performance to raw
Jetty, which is able to handle
<a href="https://www.techempower.com/benchmarks/#section=data-r20&amp;hw=ph&amp;test=plaintext&amp;l=zik0vz-sf&amp;p=ziimf3-zik0zj-zik0zj-zik0zj-1ekf" target="_blank" rel="noopener">over a million plaintext requests per second</a>.</p>

<p>If you have <em>a lot</em> of long running requests, it might be worth looking into <a href="https://javalin.io/documentation#asynchronous-requests">Asynchronous requests</a>,
or <a href="https://github.com/tipsy/loomylin" target="_blank" rel="noopener">setting up Javalin with project Loom</a>.</p>

<p>If you’re not sure if you need async requests, you probably don’t.</p>

<h4 id="websocket-message-ordering">WebSocket Message Ordering</h4>

<p>WebSocket operates over TCP, so messages will arrive at the server in the order that they were sent
by the client. Javalin then handles the messages from a given WebSocket connection sequentially.
Therefore, the order that messages are handled is guaranteed to be the same as the order the client
sent them in.</p>

<p>However, different connections will be handled in parallel on multiple threads, so the WebSocket
event handlers should be thread-safe.</p>

<hr>

<h3 id="testing">Testing</h3>
<p>People often ask how to test Javalin apps. Since Javalin is just a library, you can
instantiate and start the server programmatically. This means testing is really up to you.
There is a tutorial at <a href="https://javalin.io/tutorials/testing">/tutorials/testing</a> which goes through
some different types of tests (unit tests, functional/integration tests, ui/end-to-end tests).
You can read it to get some ideas for how to test your app.</p>

<hr>

<h3 id="javadoc">Javadoc</h3>
<p>There is a Javadoc available at <a href="https://javadoc.io/doc/io.javalin/javalin" target="_blank" rel="noopener">javadoc.io</a>.
Please contribute to the Javadoc if you can.</p>

<hr>

<h3 id="deploying">Deploying</h3>
<p>To deploy Javalin, simply create a <a href="https://maven.apache.org/plugins/maven-assembly-plugin/usage.html" target="_blank" rel="noopener">jar with dependencies</a>,
then launch the jar with <code class=" highlighter-rouge language-plaintext">java -jar filename.jar</code>. That’s it.
Javalin has an embedded server, so you don’t need an application server.
There is also a tutorial on <a href="https://javalin.io/tutorials/heroku">deploying Javalin to Heroku</a>.</p>

<hr>

<h3 id="other-web-servers">Other web servers</h3>
<div class="comment"><strong>Ctrl+f</strong>: "without jetty", "tomcat", "standalone", "servlet container", "war".</div>

<p>Javalin is primarily meant to be used with the embedded Jetty server, but if you want to run Javalin
on another web server (such as Tomcat), you can use the <code class=" highlighter-rouge language-plaintext">javalin-without-jetty</code> artifact.</p>

<hr>

<h3 id="uploads">Uploads</h3>
<p>Uploaded files are easily accessible via <code class=" highlighter-rouge language-plaintext">ctx.uploadedFiles()</code>:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/upload"</span><span class="token punctuation">,</span> ctx <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span><span class="token function">uploadedFiles</span><span class="token punctuation">(</span><span class="token string">"files"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>uploadedFile <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        FileUtil<span class="token punctuation">.</span><span class="token function">streamToFile</span><span class="token punctuation">(</span>uploadedFile<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"upload/"</span> <span class="token operator">+</span> uploadedFile<span class="token punctuation">.</span><span class="token function">getFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/upload"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span>
    ctx<span class="token punctuation">.</span><span class="token function">uploadedFiles</span><span class="token punctuation">(</span><span class="token string">"files"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{</span> uploadedFile <span class="token operator">-&gt;</span>
        FileUtil<span class="token punctuation">.</span><span class="token function">streamToFile</span><span class="token punctuation">(</span>uploadedFile<span class="token punctuation">.</span>content<span class="token punctuation">,</span> <span class="token string">"upload/<span class="token interpolation"><span class="token delimiter variable">${</span>uploadedFile<span class="token punctuation">.</span>filename<span class="token delimiter variable">}</span></span>"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<p>The corresponding HTML might look something like this:</p>
<pre class="language-markup code-toolbar"><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/upload<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>files<span class="token punctuation">"</span></span> <span class="token attr-name">multiple</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>Submit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre>

<hr>

<h3 id="asynchronous-requests">Asynchronous requests</h3>
<p>While the default ThreadPool (200 threads) is enough for most use cases,
sometimes slow operations should be run asynchronously. Luckily it’s very easy in Javalin, just
pass a <code class=" highlighter-rouge language-plaintext">CompletableFuture</code> to <code class=" highlighter-rouge language-plaintext">ctx.future()</code>:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin"><span class="token keyword">import</span> io<span class="token punctuation">.</span>javalin<span class="token punctuation">.</span>Javalin

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> app <span class="token operator">=</span> Javalin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token number">7000</span><span class="token punctuation">)</span>
    app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ctx <span class="token operator">-&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">future</span><span class="token punctuation">(</span><span class="token function">getFuture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// hopefully your future is less pointless than this:</span>
<span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">getFuture</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> CompletableFuture<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>
    Executors<span class="token punctuation">.</span><span class="token function">newSingleThreadScheduledExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">schedule</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token string">"Hello World!"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> TimeUnit<span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>
<div class="comment">Synonyms for ctrl+f: Async, CompletableFuture, Future, Concurrent, Concurrency</div>

<p>You can only set future results in endpoint handlers (get/post/put/etc).<br>
After-handlers, exception-handlers and error-handlers run like you’d expect them to after
the future has been resolved or rejected.</p>

<h4 id="async-callbacks">Async callbacks</h4>
<p>The <code class=" highlighter-rouge language-plaintext">ctx.future()</code> method’s full signature is this:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin"><span class="token annotation builtin">@JvmOverloads</span>
<span class="token keyword">fun</span> <span class="token function">future</span><span class="token punctuation">(</span>future<span class="token operator">:</span> CompletableFuture<span class="token operator">&lt;</span><span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> callback<span class="token operator">:</span> Consumer<span class="token operator">&lt;</span>Any<span class="token operator">?</span><span class="token operator">&gt;</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">:</span> Context <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>handlerType<span class="token punctuation">.</span><span class="token function">isHttpMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> inExceptionHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token function">IllegalStateException</span><span class="token punctuation">(</span><span class="token string">"You can only set CompletableFuture results in endpoint handlers."</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    resultStream <span class="token operator">=</span> <span class="token keyword">null</span>
    resultFuture <span class="token operator">=</span> future
    futureConsumer <span class="token operator">=</span> callback <span class="token operator">?:</span> Consumer <span class="token punctuation">{</span> result <span class="token operator">-&gt;</span>
        <span class="token keyword">when</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">is</span> InputStream <span class="token operator">-&gt;</span> <span class="token function">result</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
            <span class="token keyword">is</span> String <span class="token operator">-&gt;</span> <span class="token function">result</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
            <span class="token keyword">is</span> Any <span class="token operator">-&gt;</span> <span class="token function">json</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span>
<span class="token punctuation">}</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>
<p>The default behavior is to set the result of the future using <code class=" highlighter-rouge language-plaintext">ctx.result()</code> if it’s an <code class=" highlighter-rouge language-plaintext">InputStream</code>
or a <code class=" highlighter-rouge language-plaintext">String</code>, but to use <code class=" highlighter-rouge language-plaintext">ctx.json()</code> if it’s any other Object.</p>

<p>You can provide your own callback to replace the default behavior:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">ctx<span class="token punctuation">.</span><span class="token function">future</span><span class="token punctuation">(</span>myFuture<span class="token punctuation">,</span> result <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
        ctx<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<hr>

<h3 id="configuring-the-json-mapper">Configuring the JSON mapper</h3>

<p>To configure the JsonMapper, you need to pass an object which implements the <code class=" highlighter-rouge language-plaintext">JsonMapper</code> interface
to <code class=" highlighter-rouge language-plaintext">config.jsonMapper()</code>.</p>

<p>The <code class=" highlighter-rouge language-plaintext">JsonMapper</code> interface has four optional methods:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">String <span class="token function">toJsonString</span><span class="token punctuation">(</span>Object obj<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// basic method for mapping to json</span>
InputStream <span class="token function">toJsonStream</span><span class="token punctuation">(</span>Object obj<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// memory efficient method for mapping to json</span>
<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> T <span class="token function">fromJsonString</span><span class="token punctuation">(</span>String json<span class="token punctuation">,</span> Class<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> targetClass<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// basic method for mapping from json</span>
<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> T <span class="token function">fromJsonStream</span><span class="token punctuation">(</span>InputStream json<span class="token punctuation">,</span> Class<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> targetClass<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// memory efficient method for mapping from json</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<h4 id="gson-example">GSON example</h4>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">Gson gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
JsonMapper gsonMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> String <span class="token function">toJsonString</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NotNull</span> Object obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> T <span class="token function">fromJsonString</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NotNull</span> String json<span class="token punctuation">,</span> <span class="token annotation punctuation">@NotNull</span> Class<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> targetClass<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> targetClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Javalin app <span class="token operator">=</span> Javalin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config <span class="token operator">-</span><span class="token operator">&gt;</span> config<span class="token punctuation">.</span><span class="token function">jsonMapper</span><span class="token punctuation">(</span>gsonMapper<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token number">7070</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin"><span class="token keyword">val</span> gson <span class="token operator">=</span> <span class="token function">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">val</span> gsonMapper <span class="token operator">=</span> <span class="token keyword">object</span> <span class="token operator">:</span> JsonMapper <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">fromJsonString</span><span class="token punctuation">(</span>json<span class="token operator">:</span> String<span class="token punctuation">,</span> targetClass<span class="token operator">:</span> Class<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> T <span class="token punctuation">{</span>
        <span class="token keyword">return</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> targetClass<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">toJsonString</span><span class="token punctuation">(</span>obj<span class="token operator">:</span> Any<span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{</span>
        <span class="token keyword">return</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">val</span> app <span class="token operator">=</span> Javalin<span class="token punctuation">.</span><span class="token function">create</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span><span class="token function">jsonMapper</span><span class="token punctuation">(</span>gsonMapper<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token number">7070</span><span class="token punctuation">)</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<hr>

<h3 id="adding-other-servlets-and-filters-to-javalin">Adding other Servlets and Filters to Javalin</h3>
<p>Javalin is designed to work with other <code class=" highlighter-rouge language-plaintext">Servlet</code> and <code class=" highlighter-rouge language-plaintext">Filter</code> instances running on the Jetty Server.
Filters are pretty straighforward to add, since they don’t finish the request. If you need to add a serlvet
there’s an example in the repo:
<a href="https://github.com/tipsy/javalin/blob/master/javalin/src/test/java/io/javalin/examples/HelloWorldServlet.java#L21-L29" target="_blank" rel="noopener">/src/test/java/io/javalin/examples/HelloWorldServlet.java#L21-L29</a></p>

<hr>

<h3 id="views-and-templates">Views and Templates</h3>
<p>Javalin looks for templates/markdown files in <code class=" highlighter-rouge language-plaintext">src/resources</code>,
and uses the correct rendering engine based on the extension of your template.
Javalin currently supports six template engines (see below), as well as markdown.
You can also register your own rendering engine.</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">ctx<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">"/templateFile.ext"</span><span class="token punctuation">,</span> <span class="token function">model</span><span class="token punctuation">(</span><span class="token string">"firstName"</span><span class="token punctuation">,</span> <span class="token string">"John"</span><span class="token punctuation">,</span> <span class="token string">"lastName"</span><span class="token punctuation">,</span> <span class="token string">"Doe"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">ctx<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">"/templateFile.ext"</span><span class="token punctuation">,</span> <span class="token function">mapOf</span><span class="token punctuation">(</span><span class="token string">"firstName"</span> <span class="token keyword">to</span> <span class="token string">"John"</span><span class="token punctuation">,</span> <span class="token string">"lastName"</span> <span class="token keyword">to</span> <span class="token string">"Doe"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div>    </div>
  </div>
</div>

<p>Register:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">JavalinRenderer<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>JavalinPebble<span class="token punctuation">.</span>INSTANCE<span class="token punctuation">,</span> <span class="token string">".peb"</span><span class="token punctuation">,</span> <span class="token string">".pebble"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

JavalinRenderer<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> model<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> MyRenderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">".ext"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<p>Configure:</p>
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight language-kotlin code-toolbar"><code class=" language-kotlin">JavalinThymeleaf<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span>templateEngine<span class="token punctuation">)</span>
JavalinVelocity<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span>velocityEngine<span class="token punctuation">)</span>
JavalinFreemarker<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span>
JavalinMustache<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span>mustacheFactory<span class="token punctuation">)</span>
JavalinJtwig<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span>
JavalinPebble<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span>
JavalinCommonmark<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span>htmlRenderer<span class="token punctuation">,</span> markdownParser<span class="token punctuation">)</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<p>If you wish to configure a template engine (for example, to set a root directory for your template files)
please consult the documentation for that particular template engine. These kinds of settings are not handled
through Javalin.</p>

<p>If you need to configure settings beyond what’s available in <code class=" highlighter-rouge language-plaintext">JavalinTemplateEngine.configure</code>, you
have to write your own implementation and register it using <code class=" highlighter-rouge language-plaintext">JavalinRenderer.register</code>.</p>

<p>Note that these are global settings, and can’t be configured per instance of Javalin.</p>

<hr>

<h3 id="vue-support-javalinvue">Vue support (JavalinVue)</h3>
<p>If you don’t want to deal with NPM and frontend builds, Javalin has support for simplified Vue.js development.
This requires you to make a layout template, <code class=" highlighter-rouge language-plaintext">src/main/resources/vue/layout.html</code>:</p>

<pre class="language-markup code-toolbar"><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/webjars/vue/2.6.10/dist/vue.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    @componentRegistration
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>main-vue<span class="token punctuation">"</span></span> <span class="token attr-name">v-cloak</span><span class="token punctuation">&gt;</span></span>
    @routeComponent
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
    <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>el<span class="token punctuation">:</span> <span class="token string">"#main-vue"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre>

<p>When you put <code class=" highlighter-rouge language-plaintext">.vue</code> files in <code class=" highlighter-rouge language-plaintext">src/main/resources/vue</code>, Javalin will scan
the folder and register the components in your <code class=" highlighter-rouge language-plaintext">&lt;head&gt;</code> tag.</p>

<p>Javalin will also put path-parameters in the Vue instance,
which you can access like this:</p>

<pre class="language-markup code-toolbar"><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>thread-view<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ $javalin.pathParams["user"] }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
    Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">"thread-view"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        template<span class="token punctuation">:</span> <span class="token string">"#thread-view"</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre>

<p>To map a path to a Vue component you use the <code class=" highlighter-rouge language-plaintext">VueComponent</code> class:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java"><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/messages"</span><span class="token punctuation">,</span>        <span class="token function">VueComponent</span><span class="token punctuation">(</span><span class="token string">"inbox-view"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/messages/{user}"</span><span class="token punctuation">,</span> <span class="token function">VueComponent</span><span class="token punctuation">(</span><span class="token string">"thread-view"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<p>This will give you a lot of the benefits of a modern frontend architecture,
with very few of the downsides.</p>

<p>There are more extensive docs at <a href="https://javalin.io/plugins/javalinvue">/plugins/javalinvue</a>, and there is
an in-depth tutorial at <a href="https://javalin.io/tutorials/simple-frontends-with-javalin-and-vue">/tutorials/simple-frontends-with-javalin-and-vue</a>.</p>

<hr>

<h3 id="timeoutexceptions-and-closedchannelexceptions">TimeoutExceptions and ClosedChannelExceptions</h3>
<p>If you encounter <code class=" highlighter-rouge language-plaintext">TimeoutExceptions</code> and <code class=" highlighter-rouge language-plaintext">ClosedChannelExceptions</code> in your DEBUG logs,
this is nothing to worry about. Typically, a browser will keep the HTTP connection open until the
server terminates it. When this happens is decided by the server’s <code class=" highlighter-rouge language-plaintext">idleTimeout</code> setting,
which is 30 seconds by default in Jetty/Javalin. This is not a bug.</p>

<hr>

<h3 id="minecraft">Minecraft</h3>
<div class="comment">Keywords for ctrl+f: Bukkit, Spigot, BungeeCord, Bungee Cord</div>
<p>A lot of people use Javalin for Minecraft servers, and they often have issues with Jetty and WebSockets.</p>

<h4 id="relocation">Relocation</h4>
<p>It’s very common to have to <a href="https://imperceptiblethoughts.com/shadow/configuration/relocation/" target="_blank" rel="noopener">relocate</a>
Jetty in order to use Javalin with different Minecraft servers.</p>

<h4 id="custom-classloader">Custom classloader</h4>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight language-java code-toolbar"><code class=" language-java">ClassLoader classLoader <span class="token operator">=</span> Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContextClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setContextClassLoader</span><span class="token punctuation">(</span>RemoteAPI<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Javalin app <span class="token operator">=</span> Javalin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span>PORT<span class="token punctuation">)</span><span class="token punctuation">;</span>
Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setContextClassLoader</span><span class="token punctuation">(</span>classLoader<span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></pre></div></div>

<h4 id="relevant-issues">Relevant issues</h4>
<ul>
  <li><a href="https://github.com/tipsy/javalin/issues/358" target="_blank" rel="noopener">https://github.com/tipsy/javalin/issues/358</a> (with solution)</li>
  <li><a href="https://github.com/tipsy/javalin/issues/232" target="_blank" rel="noopener">https://github.com/tipsy/javalin/issues/232</a></li>
  <li><a href="https://github.com/tipsy/javalin/issues/1462" target="_blank" rel="noopener">https://github.com/tipsy/javalin/issues/1462</a></li>
</ul>

<hr>

<h3 id="documentation-for-previous-versions">Documentation for previous versions</h3>
<p>Docs for 3.13.X (last 3.X version) can be found <a href="https://javalin.io/archive/docs/v3.13.X.html">here</a>.<br>
Docs for 2.8.0 (last 2.X version) can be found <a href="https://javalin.io/archive/docs/v2.8.0.html">here</a>.<br>
Docs for 1.7.0 (last 1.X version) can be found <a href="https://javalin.io/archive/docs/v1.7.0.html">here</a>.</p>

    </main>
    <footer>
        Javalin is a Java and Kotlin web framework, open sourced under the
        <a href="https://tldrlegal.com/license/apache-license-2.0-(apache-2.0)" target="_blank" rel="noopener">Apache 2</a> license
        | <a href="https://javalin.io/download">Download</a>
        | <a href="https://javalin.io/about">About</a>
        | <a href="https://javalin.io/about#contact">Contact</a>
        | <a href="https://javalin.io/for-educators">For educators</a>
    </footer>
    <div id="star-begging">
    <style>
        #star-begging {
            transition: transform .25s;
            transform: scale(0);
            border-radius: 8px;
            position: fixed;
            bottom: 32px;
            right: 32px;
            padding: 20px 40px 16px 20px;
            background: #fff;
            box-shadow: 0 1px 20px rgba(0, 0, 0, 0.15);
            z-index: 9999998;
        }
        #star-begging.in {
            transform: scale(1);
        }
        #star-begging.out {
            transform: translateX(400px);
        }
        #star-begging p {
            font-size: 16px;
            margin: 0 0 15px;
        }
        #star-begging .close {
            position: absolute;
            right: 20px;
            top: 20px;
            height: 40px;
            width: 40px;
            line-height: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-family: arial, sans-serif;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 5px;
        }
    </style>
    <p>
        Like Javalin?
        <br>Star us 😊
    </p>
    <span class="close">×</span>
    <iframe id="starFrame" class="githubStar" title="github-stars" src="./Documentation - Javalin - A lightweight Java and Kotlin web framework_files/github-btn(1).html" frameborder="0" scrolling="0" width="150px" height="30px">
    </iframe>
    <script>
        if (localStorage.getItem("dismissed") !== "true" && document.getElementById("notification-banner") === null) {
            setTimeout(function () {
                document.querySelector("#star-begging").classList.add("in");
            }, 15000);
            document.querySelector("#star-begging .close").addEventListener("click", function () {
                document.querySelector("#star-begging").classList.add("out");
                localStorage.setItem("dismissed", "true");
            });
        }
    </script>
</div>

    <script src="./Documentation - Javalin - A lightweight Java and Kotlin web framework_files/scripts.js.download"></script>


</body></html>